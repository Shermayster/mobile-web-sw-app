{"version":3,"sources":["main.min.js","dbhelper.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","DBHelper","this","value","callback","xhr","XMLHttpRequest","open","DATABASE_URL","onload","status","json","JSON","parse","responseText","restaurants","error","send","id","fetchRestaurants","restaurant","find","r","cuisine","results","filter","cuisine_type","neighborhood","neighborhoods","map","v","uniqueNeighborhoods","indexOf","cuisines","uniqueCuisines","photograph","marker","google","maps","Marker","position","latlng","title","name","url","urlForRestaurant","animation","Animation","DROP","get","port"],"mappings":"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","file":"main.min.js","sourcesContent":["'use strict';var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}} /* eslint-env browser */\n\n/**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Common database helper functions.\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */var\nDBHelper = function () {function DBHelper() {_classCallCheck(this, DBHelper);}_createClass(DBHelper, null, [{ key: 'fetchRestaurants',\n\n\n\n\n\n\n\n\n\n\n\n    /**\n                                                                                                                                        * Fetch all restaurants.\n                                                                                                                                        */value: function fetchRestaurants(\n    callback) {\n      var xhr = new XMLHttpRequest();\n      xhr.open('GET', DBHelper.DATABASE_URL);\n      xhr.onload = function () {\n        if (xhr.status === 200) {\n          // Got a success response from server!\n          var json = JSON.parse(xhr.responseText);\n          var restaurants = json.restaurants;\n          callback(null, restaurants);\n        } else {\n          // Oops!. Got an error from server.\n          var error = 'Request failed. Returned status of ' + xhr.status;\n          callback(error, null);\n        }\n      };\n      xhr.send();\n    }\n\n    /**\n      *\n      * Fetch a restaurant by its ID.\n      * @param {number} id todo: add description\n      * @param {any} callback todo: add description\n      */ }, { key: 'fetchRestaurantById', value: function fetchRestaurantById(\n    id, callback) {\n      // fetch all restaurants with proper error handling.\n      DBHelper.fetchRestaurants(function (error, restaurants) {\n        if (error) {\n          callback(error, null);\n        } else {\n          var restaurant = restaurants.find(function (r) {return r.id === id;});\n          if (restaurant) {\n            // Got the restaurant\n            callback(null, restaurant);\n          } else {\n            // Restaurant does not exist in the database\n            callback('Restaurant does not exist', null);\n          }\n        }\n      });\n    }\n\n    /**\n       * Fetch restaurants by a cuisine type with proper error handling.\n       */ }, { key: 'fetchRestaurantByCuisine', value: function fetchRestaurantByCuisine(\n    cuisine, callback) {\n      // Fetch all restaurants  with proper error handling\n      DBHelper.fetchRestaurants(function (error, restaurants) {\n        if (error) {\n          callback(error, null);\n        } else {\n          // Filter restaurants to have only given cuisine type\n          var results = restaurants.filter(function (r) {return r.cuisine_type === cuisine;});\n          callback(null, results);\n        }\n      });\n    }\n\n    /**\n       * Fetch restaurants by a neighborhood with proper error handling.\n       */ }, { key: 'fetchRestaurantByNeighborhood', value: function fetchRestaurantByNeighborhood(\n    neighborhood, callback) {\n      // Fetch all restaurants\n      DBHelper.fetchRestaurants(function (error, restaurants) {\n        if (error) {\n          callback(error, null);\n        } else {\n          // Filter restaurants to have only given neighborhood\n          var results = restaurants.filter(function (r) {return r.neighborhood === neighborhood;});\n          callback(null, results);\n        }\n      });\n    }\n\n    /**\n       * Fetch restaurants by a cuisine and a neighborhood with proper error handling.\n       */ }, { key: 'fetchRestaurantByCuisineAndNeighborhood', value: function fetchRestaurantByCuisineAndNeighborhood(\n    cuisine, neighborhood, callback) {\n      // Fetch all restaurants\n      DBHelper.fetchRestaurants(function (error, restaurants) {\n        if (error) {\n          callback(error, null);\n        } else {\n          var results = restaurants;\n          if (cuisine !== 'all') {// filter by cuisine\n            results = results.filter(function (r) {return r.cuisine_type === cuisine;});\n          }\n          if (neighborhood !== 'all') {// filter by neighborhood\n            results = results.filter(function (r) {return r.neighborhood === neighborhood;});\n          }\n          callback(null, results);\n        }\n      });\n    }\n\n    /**\n       * Fetch all neighborhoods with proper error handling.\n       */ }, { key: 'fetchNeighborhoods', value: function fetchNeighborhoods(\n    callback) {\n      // Fetch all restaurants\n      DBHelper.fetchRestaurants(function (error, restaurants) {\n        if (error) {\n          callback(error, null);\n        } else {\n          // Get all neighborhoods from all restaurants\n          var neighborhoods = restaurants.map(function (v, i) {return restaurants[i].neighborhood;});\n          // Remove duplicates from neighborhoods\n          var uniqueNeighborhoods = neighborhoods.filter(function (v, i) {return neighborhoods.indexOf(v) === i;});\n          callback(null, uniqueNeighborhoods);\n        }\n      });\n    }\n\n    /**\n       * Fetch all cuisines with proper error handling.\n       */ }, { key: 'fetchCuisines', value: function fetchCuisines(\n    callback) {\n      // Fetch all restaurants\n      DBHelper.fetchRestaurants(function (error, restaurants) {\n        if (error) {\n          callback(error, null);\n        } else {\n          // Get all cuisines from all restaurants\n          var cuisines = restaurants.map(function (v, i) {return restaurants[i].cuisine_type;});\n          // Remove duplicates from cuisines\n          var uniqueCuisines = cuisines.filter(function (v, i) {return cuisines.indexOf(v) === i;});\n          callback(null, uniqueCuisines);\n        }\n      });\n    }\n\n    /**\n       * Restaurant page URL.\n       */ }, { key: 'urlForRestaurant', value: function urlForRestaurant(\n    restaurant) {\n      return './restaurant.html?id=' + restaurant.id;\n    }\n\n    /**\n       * Restaurant image URL.\n       */ }, { key: 'imageUrlForRestaurant', value: function imageUrlForRestaurant(\n    restaurant) {\n      return '/img/' + restaurant.photograph;\n    }\n\n    /**\n       * Map marker for a restaurant.\n       */ }, { key: 'mapMarkerForRestaurant', value: function mapMarkerForRestaurant(\n    restaurant, map) {\n      var marker = new google.maps.Marker({\n        position: restaurant.latlng,\n        title: restaurant.name,\n        url: DBHelper.urlForRestaurant(restaurant),\n        map: map,\n        animation: google.maps.Animation.DROP });\n\n      return marker;\n    } }, { key: 'DATABASE_URL', /**\n                                 * Database URL.\n                                 * Change this to restaurants.json file location on your server.\n                                 */get: function get() {// Change this to your server port\n      var port = 3000;return 'http://localhost:' + port + '/data/restaurants.json';} }]);return DBHelper;}();\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiaGVscGVyLmpzIl0sIm5hbWVzIjpbIkRCSGVscGVyIiwiY2FsbGJhY2siLCJ4aHIiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJEQVRBQkFTRV9VUkwiLCJvbmxvYWQiLCJzdGF0dXMiLCJqc29uIiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwicmVzdGF1cmFudHMiLCJlcnJvciIsInNlbmQiLCJpZCIsImZldGNoUmVzdGF1cmFudHMiLCJyZXN0YXVyYW50IiwiZmluZCIsInIiLCJjdWlzaW5lIiwicmVzdWx0cyIsImZpbHRlciIsImN1aXNpbmVfdHlwZSIsIm5laWdoYm9yaG9vZCIsIm5laWdoYm9yaG9vZHMiLCJtYXAiLCJ2IiwiaSIsInVuaXF1ZU5laWdoYm9yaG9vZHMiLCJpbmRleE9mIiwiY3Vpc2luZXMiLCJ1bmlxdWVDdWlzaW5lcyIsInBob3RvZ3JhcGgiLCJtYXJrZXIiLCJnb29nbGUiLCJtYXBzIiwiTWFya2VyIiwicG9zaXRpb24iLCJsYXRsbmciLCJ0aXRsZSIsIm5hbWUiLCJ1cmwiLCJ1cmxGb3JSZXN0YXVyYW50IiwiYW5pbWF0aW9uIiwiQW5pbWF0aW9uIiwiRFJPUCIsInBvcnQiXSwibWFwcGluZ3MiOiJ3c0JBQUE7O0FBRUE7OztBQUdNQSxROzs7Ozs7Ozs7Ozs7QUFZSjs7O0FBR3dCQyxZLEVBQVU7QUFDaEMsVUFBSUMsTUFBTSxJQUFJQyxjQUFKLEVBQVY7QUFDQUQsVUFBSUUsSUFBSixDQUFTLEtBQVQsRUFBZ0JKLFNBQVNLLFlBQXpCO0FBQ0FILFVBQUlJLE1BQUosR0FBYSxZQUFNO0FBQ2pCLFlBQUlKLElBQUlLLE1BQUosS0FBZSxHQUFuQixFQUF3QjtBQUN0QjtBQUNBLGNBQU1DLE9BQU9DLEtBQUtDLEtBQUwsQ0FBV1IsSUFBSVMsWUFBZixDQUFiO0FBQ0EsY0FBTUMsY0FBY0osS0FBS0ksV0FBekI7QUFDQVgsbUJBQVMsSUFBVCxFQUFlVyxXQUFmO0FBQ0QsU0FMRCxNQUtPO0FBQ0w7QUFDQSxjQUFNQyxn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QixDQUFmOztBQU9BLGFBQU9aLE1BQVA7QUFDRCxLLDJCQTFLRDs7O3VEQUkwQixDQUN4QjtBQUNBLFVBQU1hLE9BQU8sSUFBYixDQUNBLDZCQUEyQkEsSUFBM0IsNEJBQ0QsQyIsImZpbGUiOiJkYmhlbHBlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1lbnYgYnJvd3NlciAqL1xuXG4vKipcbiAqIENvbW1vbiBkYXRhYmFzZSBoZWxwZXIgZnVuY3Rpb25zLlxuICovXG5jbGFzcyBEQkhlbHBlciB7XG5cbiAgLyoqXG4gICAqIERhdGFiYXNlIFVSTC5cbiAgICogQ2hhbmdlIHRoaXMgdG8gcmVzdGF1cmFudHMuanNvbiBmaWxlIGxvY2F0aW9uIG9uIHlvdXIgc2VydmVyLlxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRBQkFTRV9VUkwoKSB7XG4gICAgLy8gQ2hhbmdlIHRoaXMgdG8geW91ciBzZXJ2ZXIgcG9ydFxuICAgIGNvbnN0IHBvcnQgPSAzMDAwO1xuICAgIHJldHVybiBgaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9L2RhdGEvcmVzdGF1cmFudHMuanNvbmA7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggYWxsIHJlc3RhdXJhbnRzLlxuICAgKi9cbiAgc3RhdGljIGZldGNoUmVzdGF1cmFudHMoY2FsbGJhY2spIHtcbiAgICBsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIERCSGVscGVyLkRBVEFCQVNFX1VSTCk7XG4gICAgeGhyLm9ubG9hZCA9ICgpID0+IHtcbiAgICAgIGlmICh4aHIuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgLy8gR290IGEgc3VjY2VzcyByZXNwb25zZSBmcm9tIHNlcnZlciFcbiAgICAgICAgY29uc3QganNvbiA9IEpTT04ucGFyc2UoeGhyLnJlc3BvbnNlVGV4dCk7XG4gICAgICAgIGNvbnN0IHJlc3RhdXJhbnRzID0ganNvbi5yZXN0YXVyYW50cztcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdGF1cmFudHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT29wcyEuIEdvdCBhbiBlcnJvciBmcm9tIHNlcnZlci5cbiAgICAgICAgY29uc3QgZXJyb3IgPSAoYFJlcXVlc3QgZmFpbGVkLiBSZXR1cm5lZCBzdGF0dXMgb2YgJHt4aHIuc3RhdHVzfWApO1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB4aHIuc2VuZCgpO1xuICB9XG5cbiAgIC8qKlxuICAgKlxuICAgKiBGZXRjaCBhIHJlc3RhdXJhbnQgYnkgaXRzIElELlxuICAgKiBAcGFyYW0ge251bWJlcn0gaWQgdG9kbzogYWRkIGRlc2NyaXB0aW9uXG4gICAqIEBwYXJhbSB7YW55fSBjYWxsYmFjayB0b2RvOiBhZGQgZGVzY3JpcHRpb25cbiAgICovXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCBjYWxsYmFjaykge1xuICAgIC8vIGZldGNoIGFsbCByZXN0YXVyYW50cyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCByZXN0YXVyYW50ID0gcmVzdGF1cmFudHMuZmluZChyID0+IHIuaWQgPT09IGlkKTtcbiAgICAgICAgaWYgKHJlc3RhdXJhbnQpIHtcbiAgICAgICAgICAvLyBHb3QgdGhlIHJlc3RhdXJhbnRcbiAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZXN0YXVyYW50IGRvZXMgbm90IGV4aXN0IGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAgIGNhbGxiYWNrKCdSZXN0YXVyYW50IGRvZXMgbm90IGV4aXN0JywgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCByZXN0YXVyYW50cyBieSBhIGN1aXNpbmUgdHlwZSB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICovXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmUoY3Vpc2luZSwgY2FsbGJhY2spIHtcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHMgIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmlsdGVyIHJlc3RhdXJhbnRzIHRvIGhhdmUgb25seSBnaXZlbiBjdWlzaW5lIHR5cGVcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHJlc3RhdXJhbnRzLmZpbHRlcihyID0+IHIuY3Vpc2luZV90eXBlID09PSBjdWlzaW5lKTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXG4gICAqL1xuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlOZWlnaGJvcmhvb2QobmVpZ2hib3Job29kLCBjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpbHRlciByZXN0YXVyYW50cyB0byBoYXZlIG9ubHkgZ2l2ZW4gbmVpZ2hib3Job29kXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSByZXN0YXVyYW50cy5maWx0ZXIociA9PiByLm5laWdoYm9yaG9vZCA9PT0gbmVpZ2hib3Job29kKTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBjdWlzaW5lIGFuZCBhIG5laWdoYm9yaG9vZCB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICovXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QoY3Vpc2luZSwgbmVpZ2hib3Job29kLCBjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCByZXN1bHRzID0gcmVzdGF1cmFudHM7XG4gICAgICAgIGlmIChjdWlzaW5lICE9PSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgY3Vpc2luZVxuICAgICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcihyID0+IHIuY3Vpc2luZV90eXBlID09PSBjdWlzaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobmVpZ2hib3Job29kICE9PSAnYWxsJykgeyAvLyBmaWx0ZXIgYnkgbmVpZ2hib3Job29kXG4gICAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5uZWlnaGJvcmhvb2QgPT09IG5laWdoYm9yaG9vZCk7XG4gICAgICAgIH1cbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggYWxsIG5laWdoYm9yaG9vZHMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXG4gICAqL1xuICBzdGF0aWMgZmV0Y2hOZWlnaGJvcmhvb2RzKGNhbGxiYWNrKSB7XG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gR2V0IGFsbCBuZWlnaGJvcmhvb2RzIGZyb20gYWxsIHJlc3RhdXJhbnRzXG4gICAgICAgIGNvbnN0IG5laWdoYm9yaG9vZHMgPSByZXN0YXVyYW50cy5tYXAoKHYsIGkpID0+IHJlc3RhdXJhbnRzW2ldLm5laWdoYm9yaG9vZCk7XG4gICAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gbmVpZ2hib3Job29kc1xuICAgICAgICBjb25zdCB1bmlxdWVOZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcy5maWx0ZXIoKHYsIGkpID0+IG5laWdoYm9yaG9vZHMuaW5kZXhPZih2KSA9PT0gaSk7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHVuaXF1ZU5laWdoYm9yaG9vZHMpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEZldGNoIGFsbCBjdWlzaW5lcyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICovXG4gIHN0YXRpYyBmZXRjaEN1aXNpbmVzKGNhbGxiYWNrKSB7XG4gICAgLy8gRmV0Y2ggYWxsIHJlc3RhdXJhbnRzXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gR2V0IGFsbCBjdWlzaW5lcyBmcm9tIGFsbCByZXN0YXVyYW50c1xuICAgICAgICBjb25zdCBjdWlzaW5lcyA9IHJlc3RhdXJhbnRzLm1hcCgodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0uY3Vpc2luZV90eXBlKTtcbiAgICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXMgZnJvbSBjdWlzaW5lc1xuICAgICAgICBjb25zdCB1bmlxdWVDdWlzaW5lcyA9IGN1aXNpbmVzLmZpbHRlcigodiwgaSkgPT4gY3Vpc2luZXMuaW5kZXhPZih2KSA9PT0gaSk7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHVuaXF1ZUN1aXNpbmVzKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0YXVyYW50IHBhZ2UgVVJMLlxuICAgKi9cbiAgc3RhdGljIHVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xuICAgIHJldHVybiAoYC4vcmVzdGF1cmFudC5odG1sP2lkPSR7cmVzdGF1cmFudC5pZH1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0YXVyYW50IGltYWdlIFVSTC5cbiAgICovXG4gIHN0YXRpYyBpbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xuICAgIHJldHVybiAoYC9pbWcvJHtyZXN0YXVyYW50LnBob3RvZ3JhcGh9YCk7XG4gIH1cblxuICAvKipcbiAgICogTWFwIG1hcmtlciBmb3IgYSByZXN0YXVyYW50LlxuICAgKi9cbiAgc3RhdGljIG1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgbWFwKSB7XG4gICAgY29uc3QgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICBwb3NpdGlvbjogcmVzdGF1cmFudC5sYXRsbmcsXG4gICAgICB0aXRsZTogcmVzdGF1cmFudC5uYW1lLFxuICAgICAgdXJsOiBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpLFxuICAgICAgbWFwOiBtYXAsXG4gICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QfVxuICAgICk7XG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfVxuXG59XG4iXX0=\n","/* eslint-env browser */\n\n/**\n * Common database helper functions.\n */\nclass DBHelper {\n\n  /**\n   * Database URL.\n   * Change this to restaurants.json file location on your server.\n   */\n  static get DATABASE_URL() {\n    // Change this to your server port\n    const port = 3000;\n    return `http://localhost:${port}/data/restaurants.json`;\n  }\n\n  /**\n   * Fetch all restaurants.\n   */\n  static fetchRestaurants(callback) {\n    let xhr = new XMLHttpRequest();\n    xhr.open('GET', DBHelper.DATABASE_URL);\n    xhr.onload = () => {\n      if (xhr.status === 200) {\n        // Got a success response from server!\n        const json = JSON.parse(xhr.responseText);\n        const restaurants = json.restaurants;\n        callback(null, restaurants);\n      } else {\n        // Oops!. Got an error from server.\n        const error = (`Request failed. Returned status of ${xhr.status}`);\n        callback(error, null);\n      }\n    };\n    xhr.send();\n  }\n\n   /**\n   *\n   * Fetch a restaurant by its ID.\n   * @param {number} id todo: add description\n   * @param {any} callback todo: add description\n   */\n  static fetchRestaurantById(id, callback) {\n    // fetch all restaurants with proper error handling.\n    DBHelper.fetchRestaurants((error, restaurants) => {\n      if (error) {\n        callback(error, null);\n      } else {\n        const restaurant = restaurants.find(r => r.id === id);\n        if (restaurant) {\n          // Got the restaurant\n          callback(null, restaurant);\n        } else {\n          // Restaurant does not exist in the database\n          callback('Restaurant does not exist', null);\n        }\n      }\n    });\n  }\n\n  /**\n   * Fetch restaurants by a cuisine type with proper error handling.\n   */\n  static fetchRestaurantByCuisine(cuisine, callback) {\n    // Fetch all restaurants  with proper error handling\n    DBHelper.fetchRestaurants((error, restaurants) => {\n      if (error) {\n        callback(error, null);\n      } else {\n        // Filter restaurants to have only given cuisine type\n        const results = restaurants.filter(r => r.cuisine_type === cuisine);\n        callback(null, results);\n      }\n    });\n  }\n\n  /**\n   * Fetch restaurants by a neighborhood with proper error handling.\n   */\n  static fetchRestaurantByNeighborhood(neighborhood, callback) {\n    // Fetch all restaurants\n    DBHelper.fetchRestaurants((error, restaurants) => {\n      if (error) {\n        callback(error, null);\n      } else {\n        // Filter restaurants to have only given neighborhood\n        const results = restaurants.filter(r => r.neighborhood === neighborhood);\n        callback(null, results);\n      }\n    });\n  }\n\n  /**\n   * Fetch restaurants by a cuisine and a neighborhood with proper error handling.\n   */\n  static fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood, callback) {\n    // Fetch all restaurants\n    DBHelper.fetchRestaurants((error, restaurants) => {\n      if (error) {\n        callback(error, null);\n      } else {\n        let results = restaurants;\n        if (cuisine !== 'all') { // filter by cuisine\n          results = results.filter(r => r.cuisine_type === cuisine);\n        }\n        if (neighborhood !== 'all') { // filter by neighborhood\n          results = results.filter(r => r.neighborhood === neighborhood);\n        }\n        callback(null, results);\n      }\n    });\n  }\n\n  /**\n   * Fetch all neighborhoods with proper error handling.\n   */\n  static fetchNeighborhoods(callback) {\n    // Fetch all restaurants\n    DBHelper.fetchRestaurants((error, restaurants) => {\n      if (error) {\n        callback(error, null);\n      } else {\n        // Get all neighborhoods from all restaurants\n        const neighborhoods = restaurants.map((v, i) => restaurants[i].neighborhood);\n        // Remove duplicates from neighborhoods\n        const uniqueNeighborhoods = neighborhoods.filter((v, i) => neighborhoods.indexOf(v) === i);\n        callback(null, uniqueNeighborhoods);\n      }\n    });\n  }\n\n  /**\n   * Fetch all cuisines with proper error handling.\n   */\n  static fetchCuisines(callback) {\n    // Fetch all restaurants\n    DBHelper.fetchRestaurants((error, restaurants) => {\n      if (error) {\n        callback(error, null);\n      } else {\n        // Get all cuisines from all restaurants\n        const cuisines = restaurants.map((v, i) => restaurants[i].cuisine_type);\n        // Remove duplicates from cuisines\n        const uniqueCuisines = cuisines.filter((v, i) => cuisines.indexOf(v) === i);\n        callback(null, uniqueCuisines);\n      }\n    });\n  }\n\n  /**\n   * Restaurant page URL.\n   */\n  static urlForRestaurant(restaurant) {\n    return (`./restaurant.html?id=${restaurant.id}`);\n  }\n\n  /**\n   * Restaurant image URL.\n   */\n  static imageUrlForRestaurant(restaurant) {\n    return (`/img/${restaurant.photograph}`);\n  }\n\n  /**\n   * Map marker for a restaurant.\n   */\n  static mapMarkerForRestaurant(restaurant, map) {\n    const marker = new google.maps.Marker({\n      position: restaurant.latlng,\n      title: restaurant.name,\n      url: DBHelper.urlForRestaurant(restaurant),\n      map: map,\n      animation: google.maps.Animation.DROP}\n    );\n    return marker;\n  }\n\n}\n"]}