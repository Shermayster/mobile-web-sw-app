{"version":3,"sources":["main.min.js","dbhelper.js","main.js","restaurant_info.js"],"names":["_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","DBHelper","this","value","callback","fetch","DATABASE_URL","then","res","json","error","console","log","id","fetchRestaurants","restaurants","restaurant","find","r","cuisine","results","filter","cuisine_type","neighborhood","neighborhoods","map","v","uniqueNeighborhoods","indexOf","cuisines","uniqueCuisines","photograph","marker","google","maps","Marker","position","latlng","title","name","url","urlForRestaurant","animation","Animation","DROP","get","port","Main","markers","select","document","getElementById","forEach","option","createElement","innerHTML","append","_this","fetchCuisines","fillCuisinesHTML","li","image","className","src","imageUrlForRestaurant","alt","address","more","href","_this2","mapMarkerForRestaurant","event","addListener","window","location","push","appendRestaurantImage","appendRestaurantTitle","appendRestaurantNeighborhood","appendRestaurantAddress","appendRestaurantDetails","appendRestaurantItems","_this3","ul","createRestaurantHTML","addMarkersToMap","_this4","fetchNeighborhoods","neighborhoodsList","fillNeighborhoodsHTML","restaurantsList","m","setMap","_this5","cSelect","nSelect","cIndex","selectedIndex","nIndex","fetchRestaurantByCuisineAndNeighborhood","resetRestaurants","fillRestaurantsHTML","main","addEventListener","initMap","loc","lat","lng","Map","zoom","center","scrollwheel","loadedMap","querySelectorAll","item","setAttribute","updateRestaurants","navigator","serviceWorker","register","err","RestarauntInfo","getParameterByName","idNotFound","fetchRestaurantById","fillRestaurantHTML","arguments","undefined","operating_hours","fillRestaurantHoursHTML","fillReviewsHTML","operatingHours","hours","row","day","appendChild","time","reviews","container","noReviews","review","createReviewHTML","reviewTitle","date","reviewContent","rating","comments","breadcrumb","replace","regex","RegExp","exec","decodeURIComponent","restarauntInfo","fetchRestaurantFromURL","fillBreadcrumb"],"mappings":"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","file":"main.min.js","sourcesContent":["'use strict';var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}} /* eslint-env browser */\n/* eslint no-unused-vars: \"off\"*/\n\n/**\n                                   * Common database helper functions.\n                                   */var\nDBHelper = function () {function DBHelper() {_classCallCheck(this, DBHelper);}_createClass(DBHelper, null, [{ key: 'fetchRestaurants',\n\n\n\n\n\n\n\n\n\n\n    /**\n                                                                                                                                        * Fetch all restaurants.\n                                                                                                                                        */value: function fetchRestaurants(\n    callback) {\n      // let xhr = new XMLHttpRequest();\n      // xhr.open('GET', DBHelper.DATABASE_URL);\n      // xhr.onload = () => {\n      //   if (xhr.status === 200) {\n      //     // Got a success response from server!\n      //     const json = JSON.parse(xhr.responseText);\n      //     const restaurants = json.restaurants;\n      //     callback(null, restaurants);\n      //   } else {\n      //     // Oops!. Got an error from server.\n      //     const error = (`Request failed. Returned status of ${xhr.status}`);\n      //     callback(error, null);\n      //   }\n      // };\n      // xhr.send();\n\n      return fetch(DBHelper.DATABASE_URL).\n      then(function (res) {return res.json();}).\n      catch(function (error) {return console.log(error);});\n    }\n\n    /**\n       *\n       * Fetch a restaurant by its ID.\n       * @param {number} id todo: add description\n       * @param {any} callback todo: add description\n       */ }, { key: 'fetchRestaurantById', value: function fetchRestaurantById(\n    id, callback) {\n      // fetch all restaurants with proper error handling.\n      DBHelper.fetchRestaurants(function (error, restaurants) {\n        if (error) {\n          callback(error, null);\n        } else {\n          var restaurant = restaurants.find(function (r) {return r.id === id;});\n          if (restaurant) {\n            // Got the restaurant\n            callback(null, restaurant);\n          } else {\n            // Restaurant does not exist in the database\n            callback('Restaurant does not exist', null);\n          }\n        }\n      });\n    }\n\n    /**\n       * Fetch restaurants by a cuisine type with proper error handling.\n       */ }, { key: 'fetchRestaurantByCuisine', value: function fetchRestaurantByCuisine(\n    cuisine, callback) {\n      // Fetch all restaurants  with proper error handling\n      DBHelper.fetchRestaurants(function (error, restaurants) {\n        if (error) {\n          callback(error, null);\n        } else {\n          // Filter restaurants to have only given cuisine type\n          var results = restaurants.filter(function (r) {return r.cuisine_type === cuisine;});\n          callback(null, results);\n        }\n      });\n    }\n\n    /**\n       * Fetch restaurants by a neighborhood with proper error handling.\n       */ }, { key: 'fetchRestaurantByNeighborhood', value: function fetchRestaurantByNeighborhood(\n    neighborhood, callback) {\n      // Fetch all restaurants\n      DBHelper.fetchRestaurants(function (error, restaurants) {\n        if (error) {\n          callback(error, null);\n        } else {\n          // Filter restaurants to have only given neighborhood\n          var results = restaurants.filter(function (r) {return r.neighborhood === neighborhood;});\n          callback(null, results);\n        }\n      });\n    }\n\n    /**\n       * Fetch restaurants by a cuisine and a neighborhood with proper error handling.\n       */ }, { key: 'fetchRestaurantByCuisineAndNeighborhood', value: function fetchRestaurantByCuisineAndNeighborhood(\n    cuisine, neighborhood, callback) {\n      // Fetch all restaurants\n      return DBHelper.fetchRestaurants().then(function (restaurants) {\n        var results = restaurants;\n        if (cuisine !== 'all') {// filter by cuisine\n          results = results.filter(function (r) {return r.cuisine_type === cuisine;});\n        }\n        if (neighborhood !== 'all') {// filter by neighborhood\n          results = results.filter(function (r) {return r.neighborhood === neighborhood;});\n        }\n        return results;\n      });\n    }\n\n    /**\n       * Fetch all neighborhoods with proper error handling.\n       */ }, { key: 'fetchNeighborhoods', value: function fetchNeighborhoods(\n    callback) {\n      // Fetch all restaurants\n      return DBHelper.fetchRestaurants().then(function (restaurants) {\n        // Get all neighborhoods from all restaurants\n        var neighborhoods = restaurants.map(function (v, i) {return restaurants[i].neighborhood;});\n        // Remove duplicates from neighborhoods\n        var uniqueNeighborhoods = neighborhoods.filter(function (v, i) {return neighborhoods.indexOf(v) === i;});\n        return uniqueNeighborhoods;\n      });\n    }\n\n    /**\n       * Fetch all cuisines with proper error handling.\n       */ }, { key: 'fetchCuisines', value: function fetchCuisines(\n    callback) {\n      // Fetch all restaurants\n      return DBHelper.fetchRestaurants().then(function (restaurants) {\n        // Get all cuisines from all restaurants\n        var cuisines = restaurants.map(function (v, i) {return restaurants[i].cuisine_type;});\n        // Remove duplicates from cuisines\n        var uniqueCuisines = cuisines.filter(function (v, i) {return cuisines.indexOf(v) === i;});\n        return uniqueCuisines;\n      });\n    }\n\n    /**\n       * Restaurant page URL.\n       */ }, { key: 'urlForRestaurant', value: function urlForRestaurant(\n    restaurant) {\n      return './restaurant.html?id=' + restaurant.id;\n    }\n\n    /**\n       * Restaurant image URL.\n       */ }, { key: 'imageUrlForRestaurant', value: function imageUrlForRestaurant(\n    restaurant) {\n      return '/img/' + restaurant.photograph;\n    }\n\n    /**\n       * Map marker for a restaurant.\n       */ }, { key: 'mapMarkerForRestaurant', value: function mapMarkerForRestaurant(\n    restaurant, map) {\n      var marker = new google.maps.Marker({\n        position: restaurant.latlng,\n        title: restaurant.name,\n        url: DBHelper.urlForRestaurant(restaurant),\n        map: map,\n        animation: google.maps.Animation.DROP });\n\n      return marker;\n    } }, { key: 'DATABASE_URL', /**\n                                 * Database URL.\n                                 * Change this to restaurants.json file location on your server.\n                                 */get: function get() {// Change this to your server port\n      var port = 1337;return 'http://localhost:' + port + '/restaurants';} }]);return DBHelper;}();\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRiaGVscGVyLmpzIl0sIm5hbWVzIjpbIkRCSGVscGVyIiwiY2FsbGJhY2siLCJmZXRjaCIsIkRBVEFCQVNFX1VSTCIsInRoZW4iLCJyZXMiLCJqc29uIiwiY2F0Y2giLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJpZCIsImZldGNoUmVzdGF1cmFudHMiLCJyZXN0YXVyYW50cyIsInJlc3RhdXJhbnQiLCJmaW5kIiwiciIsImN1aXNpbmUiLCJyZXN1bHRzIiwiZmlsdGVyIiwiY3Vpc2luZV90eXBlIiwibmVpZ2hib3Job29kIiwibmVpZ2hib3Job29kcyIsIm1hcCIsInYiLCJpIiwidW5pcXVlTmVpZ2hib3Job29kcyIsImluZGV4T2YiLCJjdWlzaW5lcyIsInVuaXF1ZUN1aXNpbmVzIiwicGhvdG9ncmFwaCIsIm1hcmtlciIsImdvb2dsZSIsIm1hcHMiLCJNYXJrZXIiLCJwb3NpdGlvbiIsImxhdGxuZyIsInRpdGxlIiwibmFtZSIsInVybCIsInVybEZvclJlc3RhdXJhbnQiLCJhbmltYXRpb24iLCJBbmltYXRpb24iLCJEUk9QIiwicG9ydCJdLCJtYXBwaW5ncyI6IndzQkFBQTtBQUNBOztBQUVBOzs7QUFHTUEsUTs7Ozs7Ozs7Ozs7QUFXSjs7O0FBR3dCQyxZLEVBQVU7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGFBQU9DLE1BQU1GLFNBQVNHLFlBQWY7QUFDSkMsVUFESSxDQUNDLHVCQUFPQyxJQUFJQyxJQUFKLEVBQVAsRUFERDtBQUVKQyxXQUZJLENBRUUseUJBQVNDLFFBQVFDLEdBQVIsQ0FBWUMsS0FBWixDQUFULEVBRkYsQ0FBUDtBQUdEOztBQUVEOzs7Ozs7QUFNMkJDLE0sRUFBSVYsUSxFQUFVO0FBQ3ZDO0FBQ0FELGVBQVNZLGdCQUFULENBQTBCLFVBQUNGLEtBQUQsRUFBUUcsV0FBUixFQUF3QjtBQUNoRCxZQUFJSCxLQUFKLEVBQVc7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QUFpQkgsQ0FBakIsTUFBd0JDLENBQWxDLEVBQWhCLENBQXZCO0FBQ0EsZUFBT0ksY0FBUDtBQUNELE9BTk0sQ0FBUDtBQU9EOztBQUVEOzs7QUFHd0JmLGMsRUFBWTtBQUNsQyx1Q0FBZ0NBLFdBQVdILEVBQTNDO0FBQ0Q7O0FBRUQ7OztBQUc2QkcsYyxFQUFZO0FBQ3ZDLHVCQUFnQkEsV0FBV2dCLFVBQTNCO0FBQ0Q7O0FBRUQ7OztBQUc4QmhCLGMsRUFBWVMsRyxFQUFLO0FBQzdDLFVBQU1RLFNBQVMsSUFBSUMsT0FBT0MsSUFBUCxDQUFZQyxNQUFoQixDQUF1QjtBQUNwQ0Msa0JBQVVyQixXQUFXc0IsTUFEZTtBQUVwQ0MsZUFBT3ZCLFdBQVd3QixJQUZrQjtBQUdwQ0MsYUFBS3ZDLFNBQVN3QyxnQkFBVCxDQUEwQjFCLFVBQTFCLENBSCtCO0FBSXBDUyxhQUFLQSxHQUorQjtBQUtwQ2tCLG1CQUFXVCxPQUFPQyxJQUFQLENBQVlTLFNBQVosQ0FBc0JDLElBTEcsRUFBdkIsQ0FBZjs7QUFPQSxhQUFPWixNQUFQO0FBQ0QsSywyQkFsS0Q7Ozt1REFJMEIsQ0FDeEI7QUFDQSxVQUFNYSxPQUFPLElBQWIsQ0FDQSw2QkFBMkJBLElBQTNCLGtCQUNELEMiLCJmaWxlIjoiZGJoZWxwZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cbi8qIGVzbGludCBuby11bnVzZWQtdmFyczogXCJvZmZcIiovXG5cbi8qKlxuICogQ29tbW9uIGRhdGFiYXNlIGhlbHBlciBmdW5jdGlvbnMuXG4gKi9cbmNsYXNzIERCSGVscGVyIHtcbiAgLyoqXG4gICAqIERhdGFiYXNlIFVSTC5cbiAgICogQ2hhbmdlIHRoaXMgdG8gcmVzdGF1cmFudHMuanNvbiBmaWxlIGxvY2F0aW9uIG9uIHlvdXIgc2VydmVyLlxuICAgKi9cbiAgc3RhdGljIGdldCBEQVRBQkFTRV9VUkwoKSB7XG4gICAgLy8gQ2hhbmdlIHRoaXMgdG8geW91ciBzZXJ2ZXIgcG9ydFxuICAgIGNvbnN0IHBvcnQgPSAxMzM3O1xuICAgIHJldHVybiBgaHR0cDovL2xvY2FsaG9zdDoke3BvcnR9L3Jlc3RhdXJhbnRzYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbGwgcmVzdGF1cmFudHMuXG4gICAqL1xuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50cyhjYWxsYmFjaykge1xuICAgIC8vIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAvLyB4aHIub3BlbignR0VUJywgREJIZWxwZXIuREFUQUJBU0VfVVJMKTtcbiAgICAvLyB4aHIub25sb2FkID0gKCkgPT4ge1xuICAgIC8vICAgaWYgKHhoci5zdGF0dXMgPT09IDIwMCkge1xuICAgIC8vICAgICAvLyBHb3QgYSBzdWNjZXNzIHJlc3BvbnNlIGZyb20gc2VydmVyIVxuICAgIC8vICAgICBjb25zdCBqc29uID0gSlNPTi5wYXJzZSh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAvLyAgICAgY29uc3QgcmVzdGF1cmFudHMgPSBqc29uLnJlc3RhdXJhbnRzO1xuICAgIC8vICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50cyk7XG4gICAgLy8gICB9IGVsc2Uge1xuICAgIC8vICAgICAvLyBPb3BzIS4gR290IGFuIGVycm9yIGZyb20gc2VydmVyLlxuICAgIC8vICAgICBjb25zdCBlcnJvciA9IChgUmVxdWVzdCBmYWlsZWQuIFJldHVybmVkIHN0YXR1cyBvZiAke3hoci5zdGF0dXN9YCk7XG4gICAgLy8gICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAvLyAgIH1cbiAgICAvLyB9O1xuICAgIC8vIHhoci5zZW5kKCk7XG5cbiAgICByZXR1cm4gZmV0Y2goREJIZWxwZXIuREFUQUJBU0VfVVJMKVxuICAgICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5sb2coZXJyb3IpKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBGZXRjaCBhIHJlc3RhdXJhbnQgYnkgaXRzIElELlxuICAgKiBAcGFyYW0ge251bWJlcn0gaWQgdG9kbzogYWRkIGRlc2NyaXB0aW9uXG4gICAqIEBwYXJhbSB7YW55fSBjYWxsYmFjayB0b2RvOiBhZGQgZGVzY3JpcHRpb25cbiAgICovXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCBjYWxsYmFjaykge1xuICAgIC8vIGZldGNoIGFsbCByZXN0YXVyYW50cyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjYWxsYmFjayhlcnJvciwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCByZXN0YXVyYW50ID0gcmVzdGF1cmFudHMuZmluZChyID0+IHIuaWQgPT09IGlkKTtcbiAgICAgICAgaWYgKHJlc3RhdXJhbnQpIHtcbiAgICAgICAgICAvLyBHb3QgdGhlIHJlc3RhdXJhbnRcbiAgICAgICAgICBjYWxsYmFjayhudWxsLCByZXN0YXVyYW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBSZXN0YXVyYW50IGRvZXMgbm90IGV4aXN0IGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAgIGNhbGxiYWNrKCdSZXN0YXVyYW50IGRvZXMgbm90IGV4aXN0JywgbnVsbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCByZXN0YXVyYW50cyBieSBhIGN1aXNpbmUgdHlwZSB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICovXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmUoY3Vpc2luZSwgY2FsbGJhY2spIHtcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHMgIHdpdGggcHJvcGVyIGVycm9yIGhhbmRsaW5nXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygoZXJyb3IsIHJlc3RhdXJhbnRzKSA9PiB7XG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gRmlsdGVyIHJlc3RhdXJhbnRzIHRvIGhhdmUgb25seSBnaXZlbiBjdWlzaW5lIHR5cGVcbiAgICAgICAgY29uc3QgcmVzdWx0cyA9IHJlc3RhdXJhbnRzLmZpbHRlcihyID0+IHIuY3Vpc2luZV90eXBlID09PSBjdWlzaW5lKTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBuZWlnaGJvcmhvb2Qgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXG4gICAqL1xuICBzdGF0aWMgZmV0Y2hSZXN0YXVyYW50QnlOZWlnaGJvcmhvb2QobmVpZ2hib3Job29kLCBjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xuICAgIERCSGVscGVyLmZldGNoUmVzdGF1cmFudHMoKGVycm9yLCByZXN0YXVyYW50cykgPT4ge1xuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIGNhbGxiYWNrKGVycm9yLCBudWxsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZpbHRlciByZXN0YXVyYW50cyB0byBoYXZlIG9ubHkgZ2l2ZW4gbmVpZ2hib3Job29kXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSByZXN0YXVyYW50cy5maWx0ZXIociA9PiByLm5laWdoYm9yaG9vZCA9PT0gbmVpZ2hib3Job29kKTtcbiAgICAgICAgY2FsbGJhY2sobnVsbCwgcmVzdWx0cyk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRmV0Y2ggcmVzdGF1cmFudHMgYnkgYSBjdWlzaW5lIGFuZCBhIG5laWdoYm9yaG9vZCB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICovXG4gIHN0YXRpYyBmZXRjaFJlc3RhdXJhbnRCeUN1aXNpbmVBbmROZWlnaGJvcmhvb2QoY3Vpc2luZSwgbmVpZ2hib3Job29kLCBjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xuICAgIHJldHVybiBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKCkudGhlbihyZXN0YXVyYW50cyA9PiB7XG4gICAgICBsZXQgcmVzdWx0cyA9IHJlc3RhdXJhbnRzO1xuICAgICAgaWYgKGN1aXNpbmUgIT09ICdhbGwnKSB7IC8vIGZpbHRlciBieSBjdWlzaW5lXG4gICAgICAgIHJlc3VsdHMgPSByZXN1bHRzLmZpbHRlcihyID0+IHIuY3Vpc2luZV90eXBlID09PSBjdWlzaW5lKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZWlnaGJvcmhvb2QgIT09ICdhbGwnKSB7IC8vIGZpbHRlciBieSBuZWlnaGJvcmhvb2RcbiAgICAgICAgcmVzdWx0cyA9IHJlc3VsdHMuZmlsdGVyKHIgPT4gci5uZWlnaGJvcmhvb2QgPT09IG5laWdoYm9yaG9vZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbGwgbmVpZ2hib3Job29kcyB3aXRoIHByb3BlciBlcnJvciBoYW5kbGluZy5cbiAgICovXG4gIHN0YXRpYyBmZXRjaE5laWdoYm9yaG9vZHMoY2FsbGJhY2spIHtcbiAgICAvLyBGZXRjaCBhbGwgcmVzdGF1cmFudHNcbiAgICByZXR1cm4gREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50cygpLnRoZW4ocmVzdGF1cmFudHMgPT4ge1xuICAgICAgLy8gR2V0IGFsbCBuZWlnaGJvcmhvb2RzIGZyb20gYWxsIHJlc3RhdXJhbnRzXG4gICAgICBjb25zdCBuZWlnaGJvcmhvb2RzID0gcmVzdGF1cmFudHMubWFwKCh2LCBpKSA9PiByZXN0YXVyYW50c1tpXS5uZWlnaGJvcmhvb2QpO1xuICAgICAgLy8gUmVtb3ZlIGR1cGxpY2F0ZXMgZnJvbSBuZWlnaGJvcmhvb2RzXG4gICAgICBjb25zdCB1bmlxdWVOZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kcy5maWx0ZXIoKHYsIGkpID0+IG5laWdoYm9yaG9vZHMuaW5kZXhPZih2KSA9PT0gaSk7XG4gICAgICByZXR1cm4gdW5pcXVlTmVpZ2hib3Job29kcztcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGZXRjaCBhbGwgY3Vpc2luZXMgd2l0aCBwcm9wZXIgZXJyb3IgaGFuZGxpbmcuXG4gICAqL1xuICBzdGF0aWMgZmV0Y2hDdWlzaW5lcyhjYWxsYmFjaykge1xuICAgIC8vIEZldGNoIGFsbCByZXN0YXVyYW50c1xuICAgIHJldHVybiBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRzKCkudGhlbihyZXN0YXVyYW50cyA9PiB7XG4gICAgICAvLyBHZXQgYWxsIGN1aXNpbmVzIGZyb20gYWxsIHJlc3RhdXJhbnRzXG4gICAgICBjb25zdCBjdWlzaW5lcyA9IHJlc3RhdXJhbnRzLm1hcCgodiwgaSkgPT4gcmVzdGF1cmFudHNbaV0uY3Vpc2luZV90eXBlKTtcbiAgICAgIC8vIFJlbW92ZSBkdXBsaWNhdGVzIGZyb20gY3Vpc2luZXNcbiAgICAgIGNvbnN0IHVuaXF1ZUN1aXNpbmVzID0gY3Vpc2luZXMuZmlsdGVyKCh2LCBpKSA9PiBjdWlzaW5lcy5pbmRleE9mKHYpID09PSBpKTtcbiAgICAgIHJldHVybiB1bmlxdWVDdWlzaW5lcztcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0YXVyYW50IHBhZ2UgVVJMLlxuICAgKi9cbiAgc3RhdGljIHVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xuICAgIHJldHVybiAoYC4vcmVzdGF1cmFudC5odG1sP2lkPSR7cmVzdGF1cmFudC5pZH1gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXN0YXVyYW50IGltYWdlIFVSTC5cbiAgICovXG4gIHN0YXRpYyBpbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCkge1xuICAgIHJldHVybiAoYC9pbWcvJHtyZXN0YXVyYW50LnBob3RvZ3JhcGh9YCk7XG4gIH1cblxuICAvKipcbiAgICogTWFwIG1hcmtlciBmb3IgYSByZXN0YXVyYW50LlxuICAgKi9cbiAgc3RhdGljIG1hcE1hcmtlckZvclJlc3RhdXJhbnQocmVzdGF1cmFudCwgbWFwKSB7XG4gICAgY29uc3QgbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XG4gICAgICBwb3NpdGlvbjogcmVzdGF1cmFudC5sYXRsbmcsXG4gICAgICB0aXRsZTogcmVzdGF1cmFudC5uYW1lLFxuICAgICAgdXJsOiBEQkhlbHBlci51cmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpLFxuICAgICAgbWFwOiBtYXAsXG4gICAgICBhbmltYXRpb246IGdvb2dsZS5tYXBzLkFuaW1hdGlvbi5EUk9QfVxuICAgICk7XG4gICAgcmV0dXJuIG1hcmtlcjtcbiAgfVxufVxuXG4iXX0=\n\n'use strict';var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}} /* eslint-env browser*/\n/* global  DBHelper, google*/\n\n/**\n                               * Add service worker to main page\n                               */\n\n// if ('serviceWorker' in navigator) {\n//   navigator.serviceWorker.register('./sw.js').then(() => {\n//     console.log('service worker registered!');\n//   }).catch(err => {\n//     console.log(err);\n//   });\n// }\n\nvar map = void 0;var\n\nMain = function () {\n  function Main() {_classCallCheck(this, Main);\n    this.restaurants = null;\n    this.neighborhoods = null;\n    this.cuisines = null;\n    this.markers = [];\n  }\n\n  /**\n       * Set cuisines HTML.\n     */_createClass(Main, [{ key: 'fillCuisinesHTML', value: function fillCuisinesHTML()\n    {\n      var select = document.getElementById('cuisines-select');\n      this.cuisines.forEach(function (cuisine) {\n        var option = document.createElement('option');\n        option.innerHTML = cuisine;\n        option.value = cuisine;\n        select.append(option);\n      });\n    }\n\n    /**\n         * Fetch all cuisines and set their HTML.\n       */ }, { key: 'fetchCuisines', value: function fetchCuisines()\n    {var _this = this;\n      DBHelper.fetchCuisines().then(function (cuisines) {\n        _this.cuisines = cuisines;\n        _this.fillCuisinesHTML();\n      });\n    }\n\n    /**\n         * Set neighborhoods HTML.\n         */ }, { key: 'fillNeighborhoodsHTML', value: function fillNeighborhoodsHTML()\n    {\n      var select = document.getElementById('neighborhoods-select');\n      this.neighborhoods.forEach(function (neighborhood) {\n        var option = document.createElement('option');\n        option.innerHTML = neighborhood;\n        option.value = neighborhood;\n        select.append(option);\n      });\n    } }, { key: 'appendRestaurantImage', value: function appendRestaurantImage(\n\n    restaurant, li) {\n      var image = document.createElement('img');\n      image.className = 'restaurant-img';\n      image.src = DBHelper.imageUrlForRestaurant(restaurant);\n      image.alt = 'Restaurant: ' + restaurant.name;\n      li.append(image);\n    } }, { key: 'appendRestaurantTitle', value: function appendRestaurantTitle(\n\n    restaurant, li) {\n      var name = document.createElement('h3');\n      name.innerHTML = restaurant.name;\n      li.append(name);\n    } }, { key: 'appendRestaurantNeighborhood', value: function appendRestaurantNeighborhood(\n\n    restaurant, li) {\n      var neighborhood = document.createElement('p');\n      neighborhood.innerHTML = restaurant.neighborhood;\n      li.append(neighborhood);\n    } }, { key: 'appendRestaurantAddress', value: function appendRestaurantAddress(\n\n    restaurant, li) {\n      var address = document.createElement('p');\n      address.innerHTML = restaurant.address;\n      li.append(address);\n    } }, { key: 'appendRestaurantDetails', value: function appendRestaurantDetails(\n\n    restaurant, li) {\n      var more = document.createElement('a');\n      more.innerHTML = 'View Details';\n      more.href = DBHelper.urlForRestaurant(restaurant);\n      li.append(more);\n    }\n\n    /**\n         * Add markers for current restaurants to the map.\n         */ }, { key: 'addMarkersToMap', value: function addMarkersToMap()\n    {var _this2 = this;\n      this.restaurants.forEach(function (restaurant) {\n        // Add marker to the map\n        var marker = DBHelper.mapMarkerForRestaurant(restaurant, map);\n        google.maps.event.addListener(marker, 'click', function () {\n          window.location.href = marker.url;\n        });\n        _this2.markers.push(marker);\n      });\n    } }, { key: 'appendRestaurantItems', value: function appendRestaurantItems(\n\n    restaurant, li) {\n      this.appendRestaurantImage(restaurant, li);\n      this.appendRestaurantTitle(restaurant, li);\n      this.appendRestaurantNeighborhood(restaurant, li);\n      this.appendRestaurantAddress(restaurant, li);\n      this.appendRestaurantDetails(restaurant, li);\n    }\n\n    /**\n         * Create restaurant HTML.\n         * @param {*} restaurant object\n         * @return {*} HTML Element\n         */ }, { key: 'createRestaurantHTML', value: function createRestaurantHTML(\n    restaurant) {\n      var li = document.createElement('li');\n      this.appendRestaurantItems(restaurant, li);\n      return li;\n    }\n\n    /**\n         * Create all restaurants HTML and add them to the webpage.\n         */ }, { key: 'fillRestaurantsHTML', value: function fillRestaurantsHTML()\n    {var _this3 = this;\n      var ul = document.getElementById('restaurants-list');\n      this.restaurants.forEach(function (restaurant) {\n        ul.append(_this3.createRestaurantHTML(restaurant));\n      });\n      this.addMarkersToMap();\n    }\n    /**\n         * Fetch all neighborhoods and set their HTML.\n         */ }, { key: 'fetchNeighborhoods', value: function fetchNeighborhoods()\n    {var _this4 = this;\n      DBHelper.fetchNeighborhoods().then(function (neighborhoodsList) {\n        _this4.neighborhoods = neighborhoodsList;\n        _this4.fillNeighborhoodsHTML();\n      });\n    }\n\n    /**\n         * @desc Clear current restaurants, their HTML and remove their map markers.\n         * @param {*} restaurantsList todo: add list description\n         */ }, { key: 'resetRestaurants', value: function resetRestaurants(\n    restaurantsList) {\n      // Remove all restaurants\n      this.restaurants = [];\n      var ul = document.getElementById('restaurants-list');\n      ul.innerHTML = '';\n\n      // Remove all map markers\n      this.markers.forEach(function (m) {return m.setMap(null);});\n      this.markers = [];\n      this.restaurants = restaurantsList;\n    }\n\n    /**\n         * Update page and map for current restaurants.\n         */ }, { key: 'updateRestaurants', value: function updateRestaurants()\n    {var _this5 = this;\n      var cSelect = document.getElementById('cuisines-select');\n      var nSelect = document.getElementById('neighborhoods-select');\n\n      var cIndex = cSelect.selectedIndex;\n      var nIndex = nSelect.selectedIndex;\n\n      var cuisine = cSelect[cIndex].value;\n      var neighborhood = nSelect[nIndex].value;\n\n      DBHelper.fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood).\n      then(function (restaurantsList) {\n        _this5.resetRestaurants(restaurantsList);\n        _this5.fillRestaurantsHTML();\n      });\n    } }]);return Main;}();\n\n\nvar main = new Main();\n\n/**\n                        * Fetch neighborhoods and cuisines as soon as the page is loaded.\n                        */\ndocument.addEventListener('DOMContentLoaded', function () {\n  main.fetchNeighborhoods();\n  main.fetchCuisines();\n});\n\n/**\n     * Initialize Google map, called from HTML.\n     */\nwindow.initMap = function () {\n  var loc = {\n    lat: 40.722216,\n    lng: -73.987501 };\n\n  map = new google.maps.Map(document.getElementById('map'), {\n    zoom: 12,\n    center: loc,\n    scrollwheel: false });\n\n  var loadedMap = map;\n  // disable keyboard navigation for google maps\n  google.maps.event.addListener(loadedMap, 'tilesloaded', function () {\n    document.querySelectorAll('#map a').forEach(function (item) {\n      item.setAttribute('tabindex', '-1');\n    });\n    document.querySelectorAll('#map area').forEach(function (item) {\n      item.setAttribute('tabindex', '-1');\n    });\n  });\n  main.updateRestaurants();\n};\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibWFwIiwiTWFpbiIsInJlc3RhdXJhbnRzIiwibmVpZ2hib3Job29kcyIsImN1aXNpbmVzIiwibWFya2VycyIsInNlbGVjdCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJmb3JFYWNoIiwib3B0aW9uIiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImN1aXNpbmUiLCJ2YWx1ZSIsImFwcGVuZCIsIkRCSGVscGVyIiwiZmV0Y2hDdWlzaW5lcyIsInRoZW4iLCJmaWxsQ3Vpc2luZXNIVE1MIiwibmVpZ2hib3Job29kIiwicmVzdGF1cmFudCIsImxpIiwiaW1hZ2UiLCJjbGFzc05hbWUiLCJzcmMiLCJpbWFnZVVybEZvclJlc3RhdXJhbnQiLCJhbHQiLCJuYW1lIiwiYWRkcmVzcyIsIm1vcmUiLCJocmVmIiwidXJsRm9yUmVzdGF1cmFudCIsIm1hcmtlciIsIm1hcE1hcmtlckZvclJlc3RhdXJhbnQiLCJnb29nbGUiLCJtYXBzIiwiZXZlbnQiLCJhZGRMaXN0ZW5lciIsIndpbmRvdyIsImxvY2F0aW9uIiwidXJsIiwicHVzaCIsImFwcGVuZFJlc3RhdXJhbnRJbWFnZSIsImFwcGVuZFJlc3RhdXJhbnRUaXRsZSIsImFwcGVuZFJlc3RhdXJhbnROZWlnaGJvcmhvb2QiLCJhcHBlbmRSZXN0YXVyYW50QWRkcmVzcyIsImFwcGVuZFJlc3RhdXJhbnREZXRhaWxzIiwiYXBwZW5kUmVzdGF1cmFudEl0ZW1zIiwidWwiLCJjcmVhdGVSZXN0YXVyYW50SFRNTCIsImFkZE1hcmtlcnNUb01hcCIsImZldGNoTmVpZ2hib3Job29kcyIsIm5laWdoYm9yaG9vZHNMaXN0IiwiZmlsbE5laWdoYm9yaG9vZHNIVE1MIiwicmVzdGF1cmFudHNMaXN0IiwibSIsInNldE1hcCIsImNTZWxlY3QiLCJuU2VsZWN0IiwiY0luZGV4Iiwic2VsZWN0ZWRJbmRleCIsIm5JbmRleCIsImZldGNoUmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZCIsInJlc2V0UmVzdGF1cmFudHMiLCJmaWxsUmVzdGF1cmFudHNIVE1MIiwibWFpbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbml0TWFwIiwibG9jIiwibGF0IiwibG5nIiwiTWFwIiwiem9vbSIsImNlbnRlciIsInNjcm9sbHdoZWVsIiwibG9hZGVkTWFwIiwicXVlcnlTZWxlY3RvckFsbCIsIml0ZW0iLCJzZXRBdHRyaWJ1dGUiLCJ1cGRhdGVSZXN0YXVyYW50cyJdLCJtYXBwaW5ncyI6IndzQkFBQTtBQUNBOztBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSUEsWUFBSixDOztBQUVNQyxJO0FBQ0osa0JBQWM7QUFDWixTQUFLQyxXQUFMLEdBQW1CLElBQW5CO0FBQ0EsU0FBS0MsYUFBTCxHQUFxQixJQUFyQjtBQUNBLFNBQUtDLFFBQUwsR0FBZ0IsSUFBaEI7QUFDQSxTQUFLQyxPQUFMLEdBQWUsRUFBZjtBQUNEOztBQUVEOzs7QUFHbUI7QUFDakIsVUFBTUMsU0FBU0MsU0FBU0MsY0FBVCxDQUF3QixpQkFBeEIsQ0FBZjtBQUNBLFdBQUtKLFFBQUwsQ0FBY0ssT0FBZCxDQUFzQixtQkFBVztBQUMvQixZQUFNQyxTQUFTSCxTQUFTSSxhQUFULENBQXVCLFFBQXZCLENBQWY7QUFDQUQsZUFBT0UsU0FBUCxHQUFtQkMsT0FBbkI7QUFDQUgsZUFBT0ksS0FBUCxHQUFlRCxPQUFmO0FBQ0FQLGVBQU9TLE1BQVAsQ0FBY0wsTUFBZDtBQUNELE9BTEQ7QUFNRDs7QUFFRDs7O0FBR2dCO0FBQ2RNLGVBQVNDLGFBQVQsR0FBeUJDLElBQXpCLENBQThCLG9CQUFZO0FBQ3hDLGNBQUtkLFFBQUwsR0FBZ0JBLFFBQWhCO0FBQ0EsY0FBS2UsZ0JBQUw7QUFDRCxPQUhEO0FBSUQ7O0FBRUQ7OztBQUd3QjtBQUN0QixVQUFNYixTQUFTQyxTQUFTQyxjQUFULENBQXdCLHNCQUF4QixDQUFmO0FBQ0EsV0FBS0wsYUFBTCxDQUFtQk0sT0FBbkIsQ0FBMkIsd0JB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LEs7OztBQUdILElBQU1DLE9BQU8sSUFBSWpFLElBQUosRUFBYjs7QUFFQTs7O0FBR0FNLFNBQVM0RCxnQkFBVCxDQUEwQixrQkFBMUIsRUFBOEMsWUFBTTtBQUNsREQsT0FBS2Qsa0JBQUw7QUFDQWMsT0FBS2pELGFBQUw7QUFDRCxDQUhEOztBQUtBOzs7QUFHQXNCLE9BQU82QixPQUFQLEdBQWlCLFlBQU07QUFDckIsTUFBSUMsTUFBTTtBQUNSQyxTQUFLLFNBREc7QUFFUkMsU0FBSyxDQUFDLFNBRkUsRUFBVjs7QUFJQXZFLFFBQU0sSUFBSW1DLE9BQU9DLElBQVAsQ0FBWW9DLEdBQWhCLENBQW9CakUsU0FBU0MsY0FBVCxDQUF3QixLQUF4QixDQUFwQixFQUFvRDtBQUN4RGlFLFVBQU0sRUFEa0Q7QUFFeERDLFlBQVFMLEdBRmdEO0FBR3hETSxpQkFBYSxLQUgyQyxFQUFwRCxDQUFOOztBQUtBLE1BQU1DLFlBQVk1RSxHQUFsQjtBQUNBO0FBQ0FtQyxTQUFPQyxJQUFQLENBQVlDLEtBQVosQ0FBa0JDLFdBQWxCLENBQThCc0MsU0FBOUIsRUFBeUMsYUFBekMsRUFBd0QsWUFBTTtBQUM1RHJFLGFBQVNzRSxnQkFBVCxDQUEwQixRQUExQixFQUFvQ3BFLE9BQXBDLENBQTRDLGdCQUFRO0FBQ2xEcUUsV0FBS0MsWUFBTCxDQUFrQixVQUFsQixFQUE4QixJQUE5QjtBQUNELEtBRkQ7QUFHQXhFLGFBQVNzRSxnQkFBVCxDQUEwQixXQUExQixFQUF1Q3BFLE9BQXZDLENBQStDLGdCQUFRO0FBQ3JEcUUsV0FBS0MsWUFBTCxDQUFrQixVQUFsQixFQUE4QixJQUE5QjtBQUNELEtBRkQ7QUFHRCxHQVBEO0FBUUFiLE9BQUtjLGlCQUFMO0FBQ0QsQ0FyQkQiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGVzbGludC1lbnYgYnJvd3NlciovXG4vKiBnbG9iYWwgIERCSGVscGVyLCBnb29nbGUqL1xuXG4vKipcbiAqIEFkZCBzZXJ2aWNlIHdvcmtlciB0byBtYWluIHBhZ2VcbiAqL1xuXG4vLyBpZiAoJ3NlcnZpY2VXb3JrZXInIGluIG5hdmlnYXRvcikge1xuLy8gICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5yZWdpc3RlcignLi9zdy5qcycpLnRoZW4oKCkgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKCdzZXJ2aWNlIHdvcmtlciByZWdpc3RlcmVkIScpO1xuLy8gICB9KS5jYXRjaChlcnIgPT4ge1xuLy8gICAgIGNvbnNvbGUubG9nKGVycik7XG4vLyAgIH0pO1xuLy8gfVxuXG5sZXQgbWFwO1xuXG5jbGFzcyBNYWluIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yZXN0YXVyYW50cyA9IG51bGw7XG4gICAgdGhpcy5uZWlnaGJvcmhvb2RzID0gbnVsbDtcbiAgICB0aGlzLmN1aXNpbmVzID0gbnVsbDtcbiAgICB0aGlzLm1hcmtlcnMgPSBbXTtcbiAgfVxuXG4gIC8qKlxuICAgICAqIFNldCBjdWlzaW5lcyBIVE1MLlxuICAgKi9cbiAgZmlsbEN1aXNpbmVzSFRNTCgpIHtcbiAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XG4gICAgdGhpcy5jdWlzaW5lcy5mb3JFYWNoKGN1aXNpbmUgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICBvcHRpb24uaW5uZXJIVE1MID0gY3Vpc2luZTtcbiAgICAgIG9wdGlvbi52YWx1ZSA9IGN1aXNpbmU7XG4gICAgICBzZWxlY3QuYXBwZW5kKG9wdGlvbik7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICAgKiBGZXRjaCBhbGwgY3Vpc2luZXMgYW5kIHNldCB0aGVpciBIVE1MLlxuICAgKi9cbiAgZmV0Y2hDdWlzaW5lcygpIHtcbiAgICBEQkhlbHBlci5mZXRjaEN1aXNpbmVzKCkudGhlbihjdWlzaW5lcyA9PiB7XG4gICAgICB0aGlzLmN1aXNpbmVzID0gY3Vpc2luZXM7XG4gICAgICB0aGlzLmZpbGxDdWlzaW5lc0hUTUwoKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgICAqIFNldCBuZWlnaGJvcmhvb2RzIEhUTUwuXG4gICAgICovXG4gIGZpbGxOZWlnaGJvcmhvb2RzSFRNTCgpIHtcbiAgICBjb25zdCBzZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKTtcbiAgICB0aGlzLm5laWdoYm9yaG9vZHMuZm9yRWFjaChuZWlnaGJvcmhvb2QgPT4ge1xuICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICBvcHRpb24uaW5uZXJIVE1MID0gbmVpZ2hib3Job29kO1xuICAgICAgb3B0aW9uLnZhbHVlID0gbmVpZ2hib3Job29kO1xuICAgICAgc2VsZWN0LmFwcGVuZChvcHRpb24pO1xuICAgIH0pO1xuICB9XG5cbiAgYXBwZW5kUmVzdGF1cmFudEltYWdlKHJlc3RhdXJhbnQsIGxpKSB7XG4gICAgY29uc3QgaW1hZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpbWFnZS5jbGFzc05hbWUgPSAncmVzdGF1cmFudC1pbWcnO1xuICAgIGltYWdlLnNyYyA9IERCSGVscGVyLmltYWdlVXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcbiAgICBpbWFnZS5hbHQgPSBgUmVzdGF1cmFudDogJHtyZXN0YXVyYW50Lm5hbWV9YDtcbiAgICBsaS5hcHBlbmQoaW1hZ2UpO1xuICB9XG5cbiAgYXBwZW5kUmVzdGF1cmFudFRpdGxlKHJlc3RhdXJhbnQsIGxpKSB7XG4gICAgY29uc3QgbmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gzJyk7XG4gICAgbmFtZS5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5hbWU7XG4gICAgbGkuYXBwZW5kKG5hbWUpO1xuICB9XG5cbiAgYXBwZW5kUmVzdGF1cmFudE5laWdoYm9yaG9vZChyZXN0YXVyYW50LCBsaSkge1xuICAgIGNvbnN0IG5laWdoYm9yaG9vZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBuZWlnaGJvcmhvb2QuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uZWlnaGJvcmhvb2Q7XG4gICAgbGkuYXBwZW5kKG5laWdoYm9yaG9vZCk7XG4gIH1cblxuICBhcHBlbmRSZXN0YXVyYW50QWRkcmVzcyhyZXN0YXVyYW50LCBsaSkge1xuICAgIGNvbnN0IGFkZHJlc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgYWRkcmVzcy5pbm5lckhUTUwgPSByZXN0YXVyYW50LmFkZHJlc3M7XG4gICAgbGkuYXBwZW5kKGFkZHJlc3MpO1xuICB9XG5cbiAgYXBwZW5kUmVzdGF1cmFudERldGFpbHMocmVzdGF1cmFudCwgbGkpIHtcbiAgICBjb25zdCBtb3JlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIG1vcmUuaW5uZXJIVE1MID0gJ1ZpZXcgRGV0YWlscyc7XG4gICAgbW9yZS5ocmVmID0gREJIZWxwZXIudXJsRm9yUmVzdGF1cmFudChyZXN0YXVyYW50KTtcbiAgICBsaS5hcHBlbmQobW9yZSk7XG4gIH1cblxuICAvKipcbiAgICAgKiBBZGQgbWFya2VycyBmb3IgY3VycmVudCByZXN0YXVyYW50cyB0byB0aGUgbWFwLlxuICAgICAqL1xuICBhZGRNYXJrZXJzVG9NYXAoKSB7XG4gICAgdGhpcy5yZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xuICAgICAgLy8gQWRkIG1hcmtlciB0byB0aGUgbWFwXG4gICAgICBjb25zdCBtYXJrZXIgPSBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIG1hcCk7XG4gICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIsICdjbGljaycsICgpID0+IHtcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBtYXJrZXIudXJsO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm1hcmtlcnMucHVzaChtYXJrZXIpO1xuICAgIH0pO1xuICB9XG5cbiAgYXBwZW5kUmVzdGF1cmFudEl0ZW1zKHJlc3RhdXJhbnQsIGxpKSB7XG4gICAgdGhpcy5hcHBlbmRSZXN0YXVyYW50SW1hZ2UocmVzdGF1cmFudCwgbGkpO1xuICAgIHRoaXMuYXBwZW5kUmVzdGF1cmFudFRpdGxlKHJlc3RhdXJhbnQsIGxpKTtcbiAgICB0aGlzLmFwcGVuZFJlc3RhdXJhbnROZWlnaGJvcmhvb2QocmVzdGF1cmFudCwgbGkpO1xuICAgIHRoaXMuYXBwZW5kUmVzdGF1cmFudEFkZHJlc3MocmVzdGF1cmFudCwgbGkpO1xuICAgIHRoaXMuYXBwZW5kUmVzdGF1cmFudERldGFpbHMocmVzdGF1cmFudCwgbGkpO1xuICB9XG5cbiAgLyoqXG4gICAgICogQ3JlYXRlIHJlc3RhdXJhbnQgSFRNTC5cbiAgICAgKiBAcGFyYW0geyp9IHJlc3RhdXJhbnQgb2JqZWN0XG4gICAgICogQHJldHVybiB7Kn0gSFRNTCBFbGVtZW50XG4gICAgICovXG4gIGNyZWF0ZVJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQpIHtcbiAgICBjb25zdCBsaSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJyk7XG4gICAgdGhpcy5hcHBlbmRSZXN0YXVyYW50SXRlbXMocmVzdGF1cmFudCwgbGkpO1xuICAgIHJldHVybiBsaTtcbiAgfVxuXG4gIC8qKlxuICAgICAqIENyZWF0ZSBhbGwgcmVzdGF1cmFudHMgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXG4gICAgICovXG4gIGZpbGxSZXN0YXVyYW50c0hUTUwoKSB7XG4gICAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudHMtbGlzdCcpO1xuICAgIHRoaXMucmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcbiAgICAgIHVsLmFwcGVuZCh0aGlzLmNyZWF0ZVJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQpKTtcbiAgICB9KTtcbiAgICB0aGlzLmFkZE1hcmtlcnNUb01hcCgpO1xuICB9XG4gIC8qKlxuICAgICAqIEZldGNoIGFsbCBuZWlnaGJvcmhvb2RzIGFuZCBzZXQgdGhlaXIgSFRNTC5cbiAgICAgKi9cbiAgZmV0Y2hOZWlnaGJvcmhvb2RzKCkge1xuICAgIERCSGVscGVyLmZldGNoTmVpZ2hib3Job29kcygpLnRoZW4obmVpZ2hib3Job29kc0xpc3QgPT4ge1xuICAgICAgdGhpcy5uZWlnaGJvcmhvb2RzID0gbmVpZ2hib3Job29kc0xpc3Q7XG4gICAgICB0aGlzLmZpbGxOZWlnaGJvcmhvb2RzSFRNTCgpO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAgICogQGRlc2MgQ2xlYXIgY3VycmVudCByZXN0YXVyYW50cywgdGhlaXIgSFRNTCBhbmQgcmVtb3ZlIHRoZWlyIG1hcCBtYXJrZXJzLlxuICAgICAqIEBwYXJhbSB7Kn0gcmVzdGF1cmFudHNMaXN0IHRvZG86IGFkZCBsaXN0IGRlc2NyaXB0aW9uXG4gICAgICovXG4gIHJlc2V0UmVzdGF1cmFudHMocmVzdGF1cmFudHNMaXN0KSB7XG4gICAgLy8gUmVtb3ZlIGFsbCByZXN0YXVyYW50c1xuICAgIHRoaXMucmVzdGF1cmFudHMgPSBbXTtcbiAgICBjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50cy1saXN0Jyk7XG4gICAgdWwuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAvLyBSZW1vdmUgYWxsIG1hcCBtYXJrZXJzXG4gICAgdGhpcy5tYXJrZXJzLmZvckVhY2gobSA9PiBtLnNldE1hcChudWxsKSk7XG4gICAgdGhpcy5tYXJrZXJzID0gW107XG4gICAgdGhpcy5yZXN0YXVyYW50cyA9IHJlc3RhdXJhbnRzTGlzdDtcbiAgfVxuXG4gIC8qKlxuICAgICAqIFVwZGF0ZSBwYWdlIGFuZCBtYXAgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMuXG4gICAgICovXG4gIHVwZGF0ZVJlc3RhdXJhbnRzKCkge1xuICAgIGNvbnN0IGNTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0Jyk7XG4gICAgY29uc3QgblNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZWlnaGJvcmhvb2RzLXNlbGVjdCcpO1xuXG4gICAgY29uc3QgY0luZGV4ID0gY1NlbGVjdC5zZWxlY3RlZEluZGV4O1xuICAgIGNvbnN0IG5JbmRleCA9IG5TZWxlY3Quc2VsZWN0ZWRJbmRleDtcblxuICAgIGNvbnN0IGN1aXNpbmUgPSBjU2VsZWN0W2NJbmRleF0udmFsdWU7XG4gICAgY29uc3QgbmVpZ2hib3Job29kID0gblNlbGVjdFtuSW5kZXhdLnZhbHVlO1xuXG4gICAgREJIZWxwZXIuZmV0Y2hSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kKGN1aXNpbmUsIG5laWdoYm9yaG9vZClcbiAgICAgIC50aGVuKHJlc3RhdXJhbnRzTGlzdCA9PiB7XG4gICAgICAgIHRoaXMucmVzZXRSZXN0YXVyYW50cyhyZXN0YXVyYW50c0xpc3QpO1xuICAgICAgICB0aGlzLmZpbGxSZXN0YXVyYW50c0hUTUwoKTtcbiAgICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IG1haW4gPSBuZXcgTWFpbigpO1xuXG4vKipcbiAqIEZldGNoIG5laWdoYm9yaG9vZHMgYW5kIGN1aXNpbmVzIGFzIHNvb24gYXMgdGhlIHBhZ2UgaXMgbG9hZGVkLlxuICovXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4ge1xuICBtYWluLmZldGNoTmVpZ2hib3Job29kcygpO1xuICBtYWluLmZldGNoQ3Vpc2luZXMoKTtcbn0pO1xuXG4vKipcbiAqIEluaXRpYWxpemUgR29vZ2xlIG1hcCwgY2FsbGVkIGZyb20gSFRNTC5cbiAqL1xud2luZG93LmluaXRNYXAgPSAoKSA9PiB7XG4gIGxldCBsb2MgPSB7XG4gICAgbGF0OiA0MC43MjIyMTYsXG4gICAgbG5nOiAtNzMuOTg3NTAxXG4gIH07XG4gIG1hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21hcCcpLCB7XG4gICAgem9vbTogMTIsXG4gICAgY2VudGVyOiBsb2MsXG4gICAgc2Nyb2xsd2hlZWw6IGZhbHNlXG4gIH0pO1xuICBjb25zdCBsb2FkZWRNYXAgPSBtYXA7XG4gIC8vIGRpc2FibGUga2V5Ym9hcmQgbmF2aWdhdGlvbiBmb3IgZ29vZ2xlIG1hcHNcbiAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIobG9hZGVkTWFwLCAndGlsZXNsb2FkZWQnLCAoKSA9PiB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnI21hcCBhJykuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgIH0pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyNtYXAgYXJlYScpLmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBpdGVtLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAnLTEnKTtcbiAgICB9KTtcbiAgfSk7XG4gIG1haW4udXBkYXRlUmVzdGF1cmFudHMoKTtcbn07XG5cbiJdfQ==\n\n'use strict';var _createClass = function () {function defineProperties(target, props) {for (var i = 0; i < props.length; i++) {var descriptor = props[i];descriptor.enumerable = descriptor.enumerable || false;descriptor.configurable = true;if (\"value\" in descriptor) descriptor.writable = true;Object.defineProperty(target, descriptor.key, descriptor);}}return function (Constructor, protoProps, staticProps) {if (protoProps) defineProperties(Constructor.prototype, protoProps);if (staticProps) defineProperties(Constructor, staticProps);return Constructor;};}();function _classCallCheck(instance, Constructor) {if (!(instance instanceof Constructor)) {throw new TypeError(\"Cannot call a class as a function\");}} /* eslint-env browser */\n\n/**\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  * Add service worker to restaraunt info page\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  */\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker.\n  register('./sw.js').\n  then(function () {\n    console.log('service worker registered!');\n  }).\n  catch(function (err) {\n    console.log(err);\n  });\n}var\n\nRestarauntInfo = function () {\n  function RestarauntInfo() {_classCallCheck(this, RestarauntInfo);\n    this.restaurant = null;\n  }\n\n  /**\n     * Get current restaurant from page URL.\n     * @param {*} callback todo add desc\n     */_createClass(RestarauntInfo, [{ key: 'fetchRestaurantFromURL', value: function fetchRestaurantFromURL(\n    callback) {var _this = this;\n      if (this.restaurant) {\n        // restaurant already fetched!\n        callback(null, this.restaurant);\n        return;\n      }\n      var id = this.getParameterByName('id');\n      var idNotFound = !id;\n      if (idNotFound) {\n        // no id found in URL\n        var error = 'No restaurant id in URL';\n        callback(error, null);\n      } else {\n        DBHelper.fetchRestaurantById(id, function (error, restaurant) {\n          _this.restaurant = restaurant;\n          if (!restaurant) {\n            console.error(error);\n            return;\n          }\n          _this.fillRestaurantHTML();\n          callback(null, restaurant);\n        });\n      }\n    }\n\n    /**\n       * Create restaurant HTML and add it to the webpage\n       * @param {*} restaurant todo add desc\n       */ }, { key: 'fillRestaurantHTML', value: function fillRestaurantHTML()\n    {var restaurant = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.restaurant;\n      var name = document.getElementById('restaurant-name');\n      name.innerHTML = restaurant.name;\n\n      var address = document.getElementById('restaurant-address');\n      address.innerHTML = restaurant.address;\n\n      var image = document.getElementById('restaurant-img');\n      image.className = 'restaurant-img';\n      image.src = DBHelper.imageUrlForRestaurant(restaurant);\n      image.alt = 'Restaurant: ' + restaurant.name;\n\n      var cuisine = document.getElementById('restaurant-cuisine');\n      cuisine.innerHTML = restaurant.cuisine_type;\n\n      // fill operating hours\n      if (restaurant.operating_hours) {\n        this.fillRestaurantHoursHTML();\n      }\n      // fill reviews\n      this.fillReviewsHTML();\n    }\n\n    /**\n       * Create restaurant operating hours HTML table and add it to the webpage.\n       * @param {*} operatingHours todo add desc\n       */ }, { key: 'fillRestaurantHoursHTML', value: function fillRestaurantHoursHTML()\n    {var operatingHours = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.restaurant.operating_hours;\n      var hours = document.getElementById('restaurant-hours');\n      for (var key in operatingHours) {\n        if (key) {\n          var row = document.createElement('tr');\n\n          var day = document.createElement('td');\n          day.innerHTML = key;\n          row.appendChild(day);\n\n          var time = document.createElement('td');\n          time.innerHTML = operatingHours[key];\n          row.appendChild(time);\n\n          hours.appendChild(row);\n        }\n      }\n    }\n\n    /**\n       * Create all reviews HTML and add them to the webpage.\n       * @param {*} reviews todo add desc\n       */ }, { key: 'fillReviewsHTML', value: function fillReviewsHTML()\n    {var _this2 = this;var reviews = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.restaurant.reviews;\n      var container = document.getElementById('reviews-container');\n      var title = document.createElement('h3');\n      title.innerHTML = 'Reviews';\n      container.appendChild(title);\n\n      if (!reviews) {\n        var noReviews = document.createElement('p');\n        noReviews.innerHTML = 'No reviews yet!';\n        container.appendChild(noReviews);\n        return;\n      }\n      var ul = document.getElementById('reviews-list');\n      reviews.forEach(function (review) {\n        ul.appendChild(_this2.createReviewHTML(review));\n      });\n      container.appendChild(ul);\n    }\n\n    /**\n       * Create review HTML and add it to the webpage.\n       * @param {*} review todo add desc\n       * @return {*} li todo add desc\n       */ }, { key: 'createReviewHTML', value: function createReviewHTML(\n    review) {\n      var li = document.createElement('li');\n      var reviewTitle = document.createElement('div');\n      reviewTitle.className = 'review-title review-details';\n      li.appendChild(reviewTitle);\n\n      var name = document.createElement('p');\n      name.innerHTML = review.name;\n      name.className = 'reviewer-name';\n      reviewTitle.appendChild(name);\n\n      var date = document.createElement('p');\n      date.innerHTML = review.date;\n      date.className = 'review-date';\n      reviewTitle.appendChild(date);\n\n      var reviewContent = document.createElement('div');\n      reviewContent.className = 'review-content review-details';\n      li.appendChild(reviewContent);\n\n      var rating = document.createElement('p');\n      rating.innerHTML = 'Rating: ' + review.rating;\n      rating.className = 'review-raiting uppercase';\n      reviewContent.appendChild(rating);\n\n      var comments = document.createElement('p');\n      comments.innerHTML = review.comments;\n      reviewContent.appendChild(comments);\n\n      return li;\n    }\n\n    /**\n      * Add restaurant name to the breadcrumb navigation menu\n      * @param {*} restaurant todo add desc\n      */ }, { key: 'fillBreadcrumb', value: function fillBreadcrumb()\n    {var restaurant = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.restaurant;\n      var breadcrumb = document.getElementById('breadcrumb');\n      var li = document.createElement('li');\n      li.innerHTML = restaurant.name;\n      li.setAttribute('aria-current', 'page');\n      breadcrumb.appendChild(li);\n    }\n\n    /**\n       * Get a parameter by name from page URL.\n       * @param {*} name todo add desc\n       * @param {*} url todo add desc\n       * @return {*} todo add return\n       */ }, { key: 'getParameterByName', value: function getParameterByName(\n    name, url) {\n      if (!url) {\n        url = window.location.href;\n      }\n      name = name.replace(/[\\[\\]]/g, '\\\\$&');\n      var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');\n      var results = regex.exec(url);\n      if (!results) {\n        return null;\n      }\n      if (!results[2]) {\n        return '';\n      }\n      return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n    } }]);return RestarauntInfo;}();\n\n\nvar restarauntInfo = new RestarauntInfo();\n\n/**\n                                            * Initialize Google map, called from HTML.\n                                            */\nwindow.initMap = function () {\n  restarauntInfo.fetchRestaurantFromURL(function (error, restaurant) {\n    if (error) {\n      // Got an error!\n      console.error(error);\n    } else {\n      var map = new google.maps.Map(document.getElementById('map'), {\n        zoom: 16,\n        center: restaurant.latlng,\n        scrollwheel: false });\n\n      restarauntInfo.fillBreadcrumb();\n      DBHelper.mapMarkerForRestaurant(restarauntInfo.restaurant, map);\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3RhdXJhbnRfaW5mby5qcyJdLCJuYW1lcyI6WyJuYXZpZ2F0b3IiLCJzZXJ2aWNlV29ya2VyIiwicmVnaXN0ZXIiLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsImNhdGNoIiwiZXJyIiwiUmVzdGFyYXVudEluZm8iLCJyZXN0YXVyYW50IiwiY2FsbGJhY2siLCJpZCIsImdldFBhcmFtZXRlckJ5TmFtZSIsImlkTm90Rm91bmQiLCJlcnJvciIsIkRCSGVscGVyIiwiZmV0Y2hSZXN0YXVyYW50QnlJZCIsImZpbGxSZXN0YXVyYW50SFRNTCIsIm5hbWUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwiYWRkcmVzcyIsImltYWdlIiwiY2xhc3NOYW1lIiwic3JjIiwiaW1hZ2VVcmxGb3JSZXN0YXVyYW50IiwiYWx0IiwiY3Vpc2luZSIsImN1aXNpbmVfdHlwZSIsIm9wZXJhdGluZ19ob3VycyIsImZpbGxSZXN0YXVyYW50SG91cnNIVE1MIiwiZmlsbFJldmlld3NIVE1MIiwib3BlcmF0aW5nSG91cnMiLCJob3VycyIsImtleSIsInJvdyIsImNyZWF0ZUVsZW1lbnQiLCJkYXkiLCJhcHBlbmRDaGlsZCIsInRpbWUiLCJyZXZpZXdzIiwiY29udGFpbmVyIiwidGl0bGUiLCJub1Jldmlld3MiLCJ1bCIsImZvckVhY2giLCJjcmVhdGVSZXZpZXdIVE1MIiwicmV2aWV3IiwibGkiLCJyZXZpZXdUaXRsZSIsImRhdGUiLCJyZXZpZXdDb250ZW50IiwicmF0aW5nIiwiY29tbWVudHMiLCJicmVhZGNydW1iIiwic2V0QXR0cmlidXRlIiwidXJsIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwicmVwbGFjZSIsInJlZ2V4IiwiUmVnRXhwIiwicmVzdWx0cyIsImV4ZWMiLCJkZWNvZGVVUklDb21wb25lbnQiLCJyZXN0YXJhdW50SW5mbyIsImluaXRNYXAiLCJmZXRjaFJlc3RhdXJhbnRGcm9tVVJMIiwibWFwIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsInpvb20iLCJjZW50ZXIiLCJsYXRsbmciLCJzY3JvbGx3aGVlbCIsImZpbGxCcmVhZGNydW1iIiwibWFwTWFya2VyRm9yUmVzdGF1cmFudCJdLCJtYXBwaW5ncyI6IndzQkFBQTs7QUFFQTs7O0FBR0EsSUFBSSxtQkFBbUJBLFNBQXZCLEVBQWtDO0FBQ2hDQSxZQUFVQyxhQUFWO0FBQ0dDLFVBREgsQ0FDWSxTQURaO0FBRUdDLE1BRkgsQ0FFUSxZQUFNO0FBQ1ZDLFlBQVFDLEdBQVIsQ0FBWSw0QkFBWjtBQUNELEdBSkg7QUFLR0MsT0FMSCxDQUtTLGVBQU87QUFDWkYsWUFBUUMsR0FBUixDQUFZRSxHQUFaO0FBQ0QsR0FQSDtBQVFELEM7O0FBRUtDLGM7QUFDSiw0QkFBYztBQUNaLFNBQUtDLFVBQUwsR0FBa0IsSUFBbEI7QUFDRDs7QUFFRDs7OztBQUl1QkMsWSxFQUFVO0FBQy9CLFVBQUksS0FBS0QsVUFBVCxFQUFxQjtBQUNyQjtBQUNFQyxpQkFBUyxJQUFULEVBQWUsS0FBS0QsVUFBcEI7QUFDQTtBQUNEO0FBQ0QsVUFBTUUsS0FBSyxLQUFLQyxrQkFBTCxDQUF3QixJQUF4QixDQUFYO0FBQ0EsVUFBTUMsYUFBYSxDQUFDRixFQUFwQjtBQUNBLFVBQUlFLFVBQUosRUFBZ0I7QUFDZDtBQUNBLFlBQU1DLFFBQVEseUJBQWQ7QUFDQUosaUJBQVNJLEtBQVQsRUFBZ0IsSUFBaEI7QUFDRCxPQUpELE1BSU87QUFDTEMsaUJBQVNDLG1CQUFULENBQTZCTCxFQUE3QixFQUFpQyxVQUFDRyxLQUFELEVBQVFMLFVBQVIsRUFBdUI7QUFDdEQsZ0JBQUtBLFVBQUwsR0FBa0JBLFVBQWxCO0FBQ0EsY0FBSSxDQUFDQSxVQUFMLEVBQWlCO0FBQ2ZMLG9CQUFRVSxLQUFSLENBQWNBLEtBQWQ7QUFDQTtBQUNEO0FBQ0QsZ0JBQUtHLGtCQUFMO0FBQ0FQLG1CQUFTLElBQVQsRUFBZUQsVUFBZjtBQUNELFNBUkQ7QUFTRDtBQUNGOztBQUVEOzs7O0FBSWlELFNBQTlCQSxVQUE4Qix1RUFBakIsS0FBS0Es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YXVyYW50X2luZm8uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZW52IGJyb3dzZXIgKi9cblxuLyoqXG4gKiBBZGQgc2VydmljZSB3b3JrZXIgdG8gcmVzdGFyYXVudCBpbmZvIHBhZ2VcbiAqL1xuaWYgKCdzZXJ2aWNlV29ya2VyJyBpbiBuYXZpZ2F0b3IpIHtcbiAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXJcbiAgICAucmVnaXN0ZXIoJy4vc3cuanMnKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdzZXJ2aWNlIHdvcmtlciByZWdpc3RlcmVkIScpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xufVxuXG5jbGFzcyBSZXN0YXJhdW50SW5mbyB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucmVzdGF1cmFudCA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgcmVzdGF1cmFudCBmcm9tIHBhZ2UgVVJMLlxuICAgKiBAcGFyYW0geyp9IGNhbGxiYWNrIHRvZG8gYWRkIGRlc2NcbiAgICovXG4gIGZldGNoUmVzdGF1cmFudEZyb21VUkwoY2FsbGJhY2spIHtcbiAgICBpZiAodGhpcy5yZXN0YXVyYW50KSB7XG4gICAgLy8gcmVzdGF1cmFudCBhbHJlYWR5IGZldGNoZWQhXG4gICAgICBjYWxsYmFjayhudWxsLCB0aGlzLnJlc3RhdXJhbnQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpZCA9IHRoaXMuZ2V0UGFyYW1ldGVyQnlOYW1lKCdpZCcpO1xuICAgIGNvbnN0IGlkTm90Rm91bmQgPSAhaWQ7XG4gICAgaWYgKGlkTm90Rm91bmQpIHtcbiAgICAgIC8vIG5vIGlkIGZvdW5kIGluIFVSTFxuICAgICAgY29uc3QgZXJyb3IgPSAnTm8gcmVzdGF1cmFudCBpZCBpbiBVUkwnO1xuICAgICAgY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuICAgIH0gZWxzZSB7XG4gICAgICBEQkhlbHBlci5mZXRjaFJlc3RhdXJhbnRCeUlkKGlkLCAoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICAgICAgdGhpcy5yZXN0YXVyYW50ID0gcmVzdGF1cmFudDtcbiAgICAgICAgaWYgKCFyZXN0YXVyYW50KSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlsbFJlc3RhdXJhbnRIVE1MKCk7XG4gICAgICAgIGNhbGxiYWNrKG51bGwsIHJlc3RhdXJhbnQpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSByZXN0YXVyYW50IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZVxuICAgKiBAcGFyYW0geyp9IHJlc3RhdXJhbnQgdG9kbyBhZGQgZGVzY1xuICAgKi9cbiAgZmlsbFJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQgPSB0aGlzLnJlc3RhdXJhbnQpIHtcbiAgICBjb25zdCBuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtbmFtZScpO1xuICAgIG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xuXG4gICAgY29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50LWFkZHJlc3MnKTtcbiAgICBhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcblxuICAgIGNvbnN0IGltYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtaW1nJyk7XG4gICAgaW1hZ2UuY2xhc3NOYW1lID0gJ3Jlc3RhdXJhbnQtaW1nJztcbiAgICBpbWFnZS5zcmMgPSBEQkhlbHBlci5pbWFnZVVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XG4gICAgaW1hZ2UuYWx0ID0gYFJlc3RhdXJhbnQ6ICR7cmVzdGF1cmFudC5uYW1lfWA7XG5cbiAgICBjb25zdCBjdWlzaW5lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnQtY3Vpc2luZScpO1xuICAgIGN1aXNpbmUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5jdWlzaW5lX3R5cGU7XG5cbiAgICAvLyBmaWxsIG9wZXJhdGluZyBob3Vyc1xuICAgIGlmIChyZXN0YXVyYW50Lm9wZXJhdGluZ19ob3Vycykge1xuICAgICAgdGhpcy5maWxsUmVzdGF1cmFudEhvdXJzSFRNTCgpO1xuICAgIH1cbiAgICAvLyBmaWxsIHJldmlld3NcbiAgICB0aGlzLmZpbGxSZXZpZXdzSFRNTCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSByZXN0YXVyYW50IG9wZXJhdGluZyBob3VycyBIVE1MIHRhYmxlIGFuZCBhZGQgaXQgdG8gdGhlIHdlYnBhZ2UuXG4gICAqIEBwYXJhbSB7Kn0gb3BlcmF0aW5nSG91cnMgdG9kbyBhZGQgZGVzY1xuICAgKi9cbiAgZmlsbFJlc3RhdXJhbnRIb3Vyc0hUTUwob3BlcmF0aW5nSG91cnMgPSB0aGlzLnJlc3RhdXJhbnQub3BlcmF0aW5nX2hvdXJzKSB7XG4gICAgY29uc3QgaG91cnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVzdGF1cmFudC1ob3VycycpO1xuICAgIGZvciAobGV0IGtleSBpbiBvcGVyYXRpbmdIb3Vycykge1xuICAgICAgaWYgKGtleSkge1xuICAgICAgICBjb25zdCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuXG4gICAgICAgIGNvbnN0IGRheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgIGRheS5pbm5lckhUTUwgPSBrZXk7XG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZChkYXkpO1xuXG4gICAgICAgIGNvbnN0IHRpbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICB0aW1lLmlubmVySFRNTCA9IG9wZXJhdGluZ0hvdXJzW2tleV07XG4gICAgICAgIHJvdy5hcHBlbmRDaGlsZCh0aW1lKTtcblxuICAgICAgICBob3Vycy5hcHBlbmRDaGlsZChyb3cpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYWxsIHJldmlld3MgSFRNTCBhbmQgYWRkIHRoZW0gdG8gdGhlIHdlYnBhZ2UuXG4gICAqIEBwYXJhbSB7Kn0gcmV2aWV3cyB0b2RvIGFkZCBkZXNjXG4gICAqL1xuICBmaWxsUmV2aWV3c0hUTUwocmV2aWV3cyA9IHRoaXMucmVzdGF1cmFudC5yZXZpZXdzKSB7XG4gICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jldmlld3MtY29udGFpbmVyJyk7XG4gICAgY29uc3QgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICAgIHRpdGxlLmlubmVySFRNTCA9ICdSZXZpZXdzJztcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGl0bGUpO1xuXG4gICAgaWYgKCFyZXZpZXdzKSB7XG4gICAgICBjb25zdCBub1Jldmlld3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgICBub1Jldmlld3MuaW5uZXJIVE1MID0gJ05vIHJldmlld3MgeWV0ISc7XG4gICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQobm9SZXZpZXdzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmV2aWV3cy1saXN0Jyk7XG4gICAgcmV2aWV3cy5mb3JFYWNoKHJldmlldyA9PiB7XG4gICAgICB1bC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZVJldmlld0hUTUwocmV2aWV3KSk7XG4gICAgfSk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHVsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgcmV2aWV3IEhUTUwgYW5kIGFkZCBpdCB0byB0aGUgd2VicGFnZS5cbiAgICogQHBhcmFtIHsqfSByZXZpZXcgdG9kbyBhZGQgZGVzY1xuICAgKiBAcmV0dXJuIHsqfSBsaSB0b2RvIGFkZCBkZXNjXG4gICAqL1xuICBjcmVhdGVSZXZpZXdIVE1MKHJldmlldykge1xuICAgIGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICBjb25zdCByZXZpZXdUaXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIHJldmlld1RpdGxlLmNsYXNzTmFtZSA9ICdyZXZpZXctdGl0bGUgcmV2aWV3LWRldGFpbHMnO1xuICAgIGxpLmFwcGVuZENoaWxkKHJldmlld1RpdGxlKTtcblxuICAgIGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgbmFtZS5pbm5lckhUTUwgPSByZXZpZXcubmFtZTtcbiAgICBuYW1lLmNsYXNzTmFtZSA9ICdyZXZpZXdlci1uYW1lJztcbiAgICByZXZpZXdUaXRsZS5hcHBlbmRDaGlsZChuYW1lKTtcblxuICAgIGNvbnN0IGRhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgZGF0ZS5pbm5lckhUTUwgPSByZXZpZXcuZGF0ZTtcbiAgICBkYXRlLmNsYXNzTmFtZSA9ICdyZXZpZXctZGF0ZSc7XG4gICAgcmV2aWV3VGl0bGUuYXBwZW5kQ2hpbGQoZGF0ZSk7XG5cbiAgICBjb25zdCByZXZpZXdDb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgcmV2aWV3Q29udGVudC5jbGFzc05hbWUgPSAncmV2aWV3LWNvbnRlbnQgcmV2aWV3LWRldGFpbHMnO1xuICAgIGxpLmFwcGVuZENoaWxkKHJldmlld0NvbnRlbnQpO1xuXG4gICAgY29uc3QgcmF0aW5nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xuICAgIHJhdGluZy5pbm5lckhUTUwgPSBgUmF0aW5nOiAke3Jldmlldy5yYXRpbmd9YDtcbiAgICByYXRpbmcuY2xhc3NOYW1lID0gJ3Jldmlldy1yYWl0aW5nIHVwcGVyY2FzZSc7XG4gICAgcmV2aWV3Q29udGVudC5hcHBlbmRDaGlsZChyYXRpbmcpO1xuXG4gICAgY29uc3QgY29tbWVudHMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XG4gICAgY29tbWVudHMuaW5uZXJIVE1MID0gcmV2aWV3LmNvbW1lbnRzO1xuICAgIHJldmlld0NvbnRlbnQuYXBwZW5kQ2hpbGQoY29tbWVudHMpO1xuXG4gICAgcmV0dXJuIGxpO1xuICB9XG5cbiAgLyoqXG4gICogQWRkIHJlc3RhdXJhbnQgbmFtZSB0byB0aGUgYnJlYWRjcnVtYiBuYXZpZ2F0aW9uIG1lbnVcbiAgKiBAcGFyYW0geyp9IHJlc3RhdXJhbnQgdG9kbyBhZGQgZGVzY1xuICAqL1xuICBmaWxsQnJlYWRjcnVtYihyZXN0YXVyYW50ID0gdGhpcy5yZXN0YXVyYW50KSB7XG4gICAgY29uc3QgYnJlYWRjcnVtYiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdicmVhZGNydW1iJyk7XG4gICAgY29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgIGxpLmlubmVySFRNTCA9IHJlc3RhdXJhbnQubmFtZTtcbiAgICBsaS5zZXRBdHRyaWJ1dGUoJ2FyaWEtY3VycmVudCcsICdwYWdlJyk7XG4gICAgYnJlYWRjcnVtYi5hcHBlbmRDaGlsZChsaSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgcGFyYW1ldGVyIGJ5IG5hbWUgZnJvbSBwYWdlIFVSTC5cbiAgICogQHBhcmFtIHsqfSBuYW1lIHRvZG8gYWRkIGRlc2NcbiAgICogQHBhcmFtIHsqfSB1cmwgdG9kbyBhZGQgZGVzY1xuICAgKiBAcmV0dXJuIHsqfSB0b2RvIGFkZCByZXR1cm5cbiAgICovXG4gIGdldFBhcmFtZXRlckJ5TmFtZShuYW1lLCB1cmwpIHtcbiAgICBpZiAoIXVybCkge1xuICAgICAgdXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gICAgfVxuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoL1tcXFtcXF1dL2csICdcXFxcJCYnKTtcbiAgICBjb25zdCByZWdleCA9IG5ldyBSZWdFeHAoYFs/Jl0ke25hbWV9KD0oW14mI10qKXwmfCN8JClgKTtcbiAgICBjb25zdCByZXN1bHRzID0gcmVnZXguZXhlYyh1cmwpO1xuICAgIGlmICghcmVzdWx0cykge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGlmICghcmVzdWx0c1syXSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMl0ucmVwbGFjZSgvXFwrL2csICcgJykpO1xuICB9XG59XG5cbmNvbnN0IHJlc3RhcmF1bnRJbmZvID0gbmV3IFJlc3RhcmF1bnRJbmZvKCk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBHb29nbGUgbWFwLCBjYWxsZWQgZnJvbSBIVE1MLlxuICovXG53aW5kb3cuaW5pdE1hcCA9ICgpID0+IHtcbiAgcmVzdGFyYXVudEluZm8uZmV0Y2hSZXN0YXVyYW50RnJvbVVSTCgoZXJyb3IsIHJlc3RhdXJhbnQpID0+IHtcbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIC8vIEdvdCBhbiBlcnJvciFcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBtYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtYXAnKSwge1xuICAgICAgICB6b29tOiAxNixcbiAgICAgICAgY2VudGVyOiByZXN0YXVyYW50LmxhdGxuZyxcbiAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIHJlc3RhcmF1bnRJbmZvLmZpbGxCcmVhZGNydW1iKCk7XG4gICAgICBEQkhlbHBlci5tYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhcmF1bnRJbmZvLnJlc3RhdXJhbnQsIG1hcCk7XG4gICAgfVxuICB9KTtcbn07XG4iXX0=\n","/* eslint-env browser */\n/* eslint no-unused-vars: \"off\"*/\n\n/**\n * Common database helper functions.\n */\nclass DBHelper {\n  /**\n   * Database URL.\n   * Change this to restaurants.json file location on your server.\n   */\n  static get DATABASE_URL() {\n    // Change this to your server port\n    const port = 1337;\n    return `http://localhost:${port}/restaurants`;\n  }\n\n  /**\n   * Fetch all restaurants.\n   */\n  static fetchRestaurants(callback) {\n    // let xhr = new XMLHttpRequest();\n    // xhr.open('GET', DBHelper.DATABASE_URL);\n    // xhr.onload = () => {\n    //   if (xhr.status === 200) {\n    //     // Got a success response from server!\n    //     const json = JSON.parse(xhr.responseText);\n    //     const restaurants = json.restaurants;\n    //     callback(null, restaurants);\n    //   } else {\n    //     // Oops!. Got an error from server.\n    //     const error = (`Request failed. Returned status of ${xhr.status}`);\n    //     callback(error, null);\n    //   }\n    // };\n    // xhr.send();\n\n    return fetch(DBHelper.DATABASE_URL)\n      .then(res => res.json())\n      .catch(error => console.log(error));\n  }\n\n  /**\n   *\n   * Fetch a restaurant by its ID.\n   * @param {number} id todo: add description\n   * @param {any} callback todo: add description\n   */\n  static fetchRestaurantById(id, callback) {\n    // fetch all restaurants with proper error handling.\n    DBHelper.fetchRestaurants((error, restaurants) => {\n      if (error) {\n        callback(error, null);\n      } else {\n        const restaurant = restaurants.find(r => r.id === id);\n        if (restaurant) {\n          // Got the restaurant\n          callback(null, restaurant);\n        } else {\n          // Restaurant does not exist in the database\n          callback('Restaurant does not exist', null);\n        }\n      }\n    });\n  }\n\n  /**\n   * Fetch restaurants by a cuisine type with proper error handling.\n   */\n  static fetchRestaurantByCuisine(cuisine, callback) {\n    // Fetch all restaurants  with proper error handling\n    DBHelper.fetchRestaurants((error, restaurants) => {\n      if (error) {\n        callback(error, null);\n      } else {\n        // Filter restaurants to have only given cuisine type\n        const results = restaurants.filter(r => r.cuisine_type === cuisine);\n        callback(null, results);\n      }\n    });\n  }\n\n  /**\n   * Fetch restaurants by a neighborhood with proper error handling.\n   */\n  static fetchRestaurantByNeighborhood(neighborhood, callback) {\n    // Fetch all restaurants\n    DBHelper.fetchRestaurants((error, restaurants) => {\n      if (error) {\n        callback(error, null);\n      } else {\n        // Filter restaurants to have only given neighborhood\n        const results = restaurants.filter(r => r.neighborhood === neighborhood);\n        callback(null, results);\n      }\n    });\n  }\n\n  /**\n   * Fetch restaurants by a cuisine and a neighborhood with proper error handling.\n   */\n  static fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood, callback) {\n    // Fetch all restaurants\n    return DBHelper.fetchRestaurants().then(restaurants => {\n      let results = restaurants;\n      if (cuisine !== 'all') { // filter by cuisine\n        results = results.filter(r => r.cuisine_type === cuisine);\n      }\n      if (neighborhood !== 'all') { // filter by neighborhood\n        results = results.filter(r => r.neighborhood === neighborhood);\n      }\n      return results;\n    });\n  }\n\n  /**\n   * Fetch all neighborhoods with proper error handling.\n   */\n  static fetchNeighborhoods(callback) {\n    // Fetch all restaurants\n    return DBHelper.fetchRestaurants().then(restaurants => {\n      // Get all neighborhoods from all restaurants\n      const neighborhoods = restaurants.map((v, i) => restaurants[i].neighborhood);\n      // Remove duplicates from neighborhoods\n      const uniqueNeighborhoods = neighborhoods.filter((v, i) => neighborhoods.indexOf(v) === i);\n      return uniqueNeighborhoods;\n    });\n  }\n\n  /**\n   * Fetch all cuisines with proper error handling.\n   */\n  static fetchCuisines(callback) {\n    // Fetch all restaurants\n    return DBHelper.fetchRestaurants().then(restaurants => {\n      // Get all cuisines from all restaurants\n      const cuisines = restaurants.map((v, i) => restaurants[i].cuisine_type);\n      // Remove duplicates from cuisines\n      const uniqueCuisines = cuisines.filter((v, i) => cuisines.indexOf(v) === i);\n      return uniqueCuisines;\n    });\n  }\n\n  /**\n   * Restaurant page URL.\n   */\n  static urlForRestaurant(restaurant) {\n    return (`./restaurant.html?id=${restaurant.id}`);\n  }\n\n  /**\n   * Restaurant image URL.\n   */\n  static imageUrlForRestaurant(restaurant) {\n    return (`/img/${restaurant.photograph}`);\n  }\n\n  /**\n   * Map marker for a restaurant.\n   */\n  static mapMarkerForRestaurant(restaurant, map) {\n    const marker = new google.maps.Marker({\n      position: restaurant.latlng,\n      title: restaurant.name,\n      url: DBHelper.urlForRestaurant(restaurant),\n      map: map,\n      animation: google.maps.Animation.DROP}\n    );\n    return marker;\n  }\n}\n\n","/* eslint-env browser*/\n/* global  DBHelper, google*/\n\n/**\n * Add service worker to main page\n */\n\n// if ('serviceWorker' in navigator) {\n//   navigator.serviceWorker.register('./sw.js').then(() => {\n//     console.log('service worker registered!');\n//   }).catch(err => {\n//     console.log(err);\n//   });\n// }\n\nlet map;\n\nclass Main {\n  constructor() {\n    this.restaurants = null;\n    this.neighborhoods = null;\n    this.cuisines = null;\n    this.markers = [];\n  }\n\n  /**\n     * Set cuisines HTML.\n   */\n  fillCuisinesHTML() {\n    const select = document.getElementById('cuisines-select');\n    this.cuisines.forEach(cuisine => {\n      const option = document.createElement('option');\n      option.innerHTML = cuisine;\n      option.value = cuisine;\n      select.append(option);\n    });\n  }\n\n  /**\n     * Fetch all cuisines and set their HTML.\n   */\n  fetchCuisines() {\n    DBHelper.fetchCuisines().then(cuisines => {\n      this.cuisines = cuisines;\n      this.fillCuisinesHTML();\n    });\n  }\n\n  /**\n     * Set neighborhoods HTML.\n     */\n  fillNeighborhoodsHTML() {\n    const select = document.getElementById('neighborhoods-select');\n    this.neighborhoods.forEach(neighborhood => {\n      const option = document.createElement('option');\n      option.innerHTML = neighborhood;\n      option.value = neighborhood;\n      select.append(option);\n    });\n  }\n\n  appendRestaurantImage(restaurant, li) {\n    const image = document.createElement('img');\n    image.className = 'restaurant-img';\n    image.src = DBHelper.imageUrlForRestaurant(restaurant);\n    image.alt = `Restaurant: ${restaurant.name}`;\n    li.append(image);\n  }\n\n  appendRestaurantTitle(restaurant, li) {\n    const name = document.createElement('h3');\n    name.innerHTML = restaurant.name;\n    li.append(name);\n  }\n\n  appendRestaurantNeighborhood(restaurant, li) {\n    const neighborhood = document.createElement('p');\n    neighborhood.innerHTML = restaurant.neighborhood;\n    li.append(neighborhood);\n  }\n\n  appendRestaurantAddress(restaurant, li) {\n    const address = document.createElement('p');\n    address.innerHTML = restaurant.address;\n    li.append(address);\n  }\n\n  appendRestaurantDetails(restaurant, li) {\n    const more = document.createElement('a');\n    more.innerHTML = 'View Details';\n    more.href = DBHelper.urlForRestaurant(restaurant);\n    li.append(more);\n  }\n\n  /**\n     * Add markers for current restaurants to the map.\n     */\n  addMarkersToMap() {\n    this.restaurants.forEach(restaurant => {\n      // Add marker to the map\n      const marker = DBHelper.mapMarkerForRestaurant(restaurant, map);\n      google.maps.event.addListener(marker, 'click', () => {\n        window.location.href = marker.url;\n      });\n      this.markers.push(marker);\n    });\n  }\n\n  appendRestaurantItems(restaurant, li) {\n    this.appendRestaurantImage(restaurant, li);\n    this.appendRestaurantTitle(restaurant, li);\n    this.appendRestaurantNeighborhood(restaurant, li);\n    this.appendRestaurantAddress(restaurant, li);\n    this.appendRestaurantDetails(restaurant, li);\n  }\n\n  /**\n     * Create restaurant HTML.\n     * @param {*} restaurant object\n     * @return {*} HTML Element\n     */\n  createRestaurantHTML(restaurant) {\n    const li = document.createElement('li');\n    this.appendRestaurantItems(restaurant, li);\n    return li;\n  }\n\n  /**\n     * Create all restaurants HTML and add them to the webpage.\n     */\n  fillRestaurantsHTML() {\n    const ul = document.getElementById('restaurants-list');\n    this.restaurants.forEach(restaurant => {\n      ul.append(this.createRestaurantHTML(restaurant));\n    });\n    this.addMarkersToMap();\n  }\n  /**\n     * Fetch all neighborhoods and set their HTML.\n     */\n  fetchNeighborhoods() {\n    DBHelper.fetchNeighborhoods().then(neighborhoodsList => {\n      this.neighborhoods = neighborhoodsList;\n      this.fillNeighborhoodsHTML();\n    });\n  }\n\n  /**\n     * @desc Clear current restaurants, their HTML and remove their map markers.\n     * @param {*} restaurantsList todo: add list description\n     */\n  resetRestaurants(restaurantsList) {\n    // Remove all restaurants\n    this.restaurants = [];\n    const ul = document.getElementById('restaurants-list');\n    ul.innerHTML = '';\n\n    // Remove all map markers\n    this.markers.forEach(m => m.setMap(null));\n    this.markers = [];\n    this.restaurants = restaurantsList;\n  }\n\n  /**\n     * Update page and map for current restaurants.\n     */\n  updateRestaurants() {\n    const cSelect = document.getElementById('cuisines-select');\n    const nSelect = document.getElementById('neighborhoods-select');\n\n    const cIndex = cSelect.selectedIndex;\n    const nIndex = nSelect.selectedIndex;\n\n    const cuisine = cSelect[cIndex].value;\n    const neighborhood = nSelect[nIndex].value;\n\n    DBHelper.fetchRestaurantByCuisineAndNeighborhood(cuisine, neighborhood)\n      .then(restaurantsList => {\n        this.resetRestaurants(restaurantsList);\n        this.fillRestaurantsHTML();\n      });\n  }\n}\n\nconst main = new Main();\n\n/**\n * Fetch neighborhoods and cuisines as soon as the page is loaded.\n */\ndocument.addEventListener('DOMContentLoaded', () => {\n  main.fetchNeighborhoods();\n  main.fetchCuisines();\n});\n\n/**\n * Initialize Google map, called from HTML.\n */\nwindow.initMap = () => {\n  let loc = {\n    lat: 40.722216,\n    lng: -73.987501\n  };\n  map = new google.maps.Map(document.getElementById('map'), {\n    zoom: 12,\n    center: loc,\n    scrollwheel: false\n  });\n  const loadedMap = map;\n  // disable keyboard navigation for google maps\n  google.maps.event.addListener(loadedMap, 'tilesloaded', () => {\n    document.querySelectorAll('#map a').forEach(item => {\n      item.setAttribute('tabindex', '-1');\n    });\n    document.querySelectorAll('#map area').forEach(item => {\n      item.setAttribute('tabindex', '-1');\n    });\n  });\n  main.updateRestaurants();\n};\n\n","/* eslint-env browser */\n\n/**\n * Add service worker to restaraunt info page\n */\nif ('serviceWorker' in navigator) {\n  navigator.serviceWorker\n    .register('./sw.js')\n    .then(() => {\n      console.log('service worker registered!');\n    })\n    .catch(err => {\n      console.log(err);\n    });\n}\n\nclass RestarauntInfo {\n  constructor() {\n    this.restaurant = null;\n  }\n\n  /**\n   * Get current restaurant from page URL.\n   * @param {*} callback todo add desc\n   */\n  fetchRestaurantFromURL(callback) {\n    if (this.restaurant) {\n    // restaurant already fetched!\n      callback(null, this.restaurant);\n      return;\n    }\n    const id = this.getParameterByName('id');\n    const idNotFound = !id;\n    if (idNotFound) {\n      // no id found in URL\n      const error = 'No restaurant id in URL';\n      callback(error, null);\n    } else {\n      DBHelper.fetchRestaurantById(id, (error, restaurant) => {\n        this.restaurant = restaurant;\n        if (!restaurant) {\n          console.error(error);\n          return;\n        }\n        this.fillRestaurantHTML();\n        callback(null, restaurant);\n      });\n    }\n  }\n\n  /**\n   * Create restaurant HTML and add it to the webpage\n   * @param {*} restaurant todo add desc\n   */\n  fillRestaurantHTML(restaurant = this.restaurant) {\n    const name = document.getElementById('restaurant-name');\n    name.innerHTML = restaurant.name;\n\n    const address = document.getElementById('restaurant-address');\n    address.innerHTML = restaurant.address;\n\n    const image = document.getElementById('restaurant-img');\n    image.className = 'restaurant-img';\n    image.src = DBHelper.imageUrlForRestaurant(restaurant);\n    image.alt = `Restaurant: ${restaurant.name}`;\n\n    const cuisine = document.getElementById('restaurant-cuisine');\n    cuisine.innerHTML = restaurant.cuisine_type;\n\n    // fill operating hours\n    if (restaurant.operating_hours) {\n      this.fillRestaurantHoursHTML();\n    }\n    // fill reviews\n    this.fillReviewsHTML();\n  }\n\n  /**\n   * Create restaurant operating hours HTML table and add it to the webpage.\n   * @param {*} operatingHours todo add desc\n   */\n  fillRestaurantHoursHTML(operatingHours = this.restaurant.operating_hours) {\n    const hours = document.getElementById('restaurant-hours');\n    for (let key in operatingHours) {\n      if (key) {\n        const row = document.createElement('tr');\n\n        const day = document.createElement('td');\n        day.innerHTML = key;\n        row.appendChild(day);\n\n        const time = document.createElement('td');\n        time.innerHTML = operatingHours[key];\n        row.appendChild(time);\n\n        hours.appendChild(row);\n      }\n    }\n  }\n\n  /**\n   * Create all reviews HTML and add them to the webpage.\n   * @param {*} reviews todo add desc\n   */\n  fillReviewsHTML(reviews = this.restaurant.reviews) {\n    const container = document.getElementById('reviews-container');\n    const title = document.createElement('h3');\n    title.innerHTML = 'Reviews';\n    container.appendChild(title);\n\n    if (!reviews) {\n      const noReviews = document.createElement('p');\n      noReviews.innerHTML = 'No reviews yet!';\n      container.appendChild(noReviews);\n      return;\n    }\n    const ul = document.getElementById('reviews-list');\n    reviews.forEach(review => {\n      ul.appendChild(this.createReviewHTML(review));\n    });\n    container.appendChild(ul);\n  }\n\n  /**\n   * Create review HTML and add it to the webpage.\n   * @param {*} review todo add desc\n   * @return {*} li todo add desc\n   */\n  createReviewHTML(review) {\n    const li = document.createElement('li');\n    const reviewTitle = document.createElement('div');\n    reviewTitle.className = 'review-title review-details';\n    li.appendChild(reviewTitle);\n\n    const name = document.createElement('p');\n    name.innerHTML = review.name;\n    name.className = 'reviewer-name';\n    reviewTitle.appendChild(name);\n\n    const date = document.createElement('p');\n    date.innerHTML = review.date;\n    date.className = 'review-date';\n    reviewTitle.appendChild(date);\n\n    const reviewContent = document.createElement('div');\n    reviewContent.className = 'review-content review-details';\n    li.appendChild(reviewContent);\n\n    const rating = document.createElement('p');\n    rating.innerHTML = `Rating: ${review.rating}`;\n    rating.className = 'review-raiting uppercase';\n    reviewContent.appendChild(rating);\n\n    const comments = document.createElement('p');\n    comments.innerHTML = review.comments;\n    reviewContent.appendChild(comments);\n\n    return li;\n  }\n\n  /**\n  * Add restaurant name to the breadcrumb navigation menu\n  * @param {*} restaurant todo add desc\n  */\n  fillBreadcrumb(restaurant = this.restaurant) {\n    const breadcrumb = document.getElementById('breadcrumb');\n    const li = document.createElement('li');\n    li.innerHTML = restaurant.name;\n    li.setAttribute('aria-current', 'page');\n    breadcrumb.appendChild(li);\n  }\n\n  /**\n   * Get a parameter by name from page URL.\n   * @param {*} name todo add desc\n   * @param {*} url todo add desc\n   * @return {*} todo add return\n   */\n  getParameterByName(name, url) {\n    if (!url) {\n      url = window.location.href;\n    }\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\n    const regex = new RegExp(`[?&]${name}(=([^&#]*)|&|#|$)`);\n    const results = regex.exec(url);\n    if (!results) {\n      return null;\n    }\n    if (!results[2]) {\n      return '';\n    }\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\n  }\n}\n\nconst restarauntInfo = new RestarauntInfo();\n\n/**\n * Initialize Google map, called from HTML.\n */\nwindow.initMap = () => {\n  restarauntInfo.fetchRestaurantFromURL((error, restaurant) => {\n    if (error) {\n      // Got an error!\n      console.error(error);\n    } else {\n      const map = new google.maps.Map(document.getElementById('map'), {\n        zoom: 16,\n        center: restaurant.latlng,\n        scrollwheel: false\n      });\n      restarauntInfo.fillBreadcrumb();\n      DBHelper.mapMarkerForRestaurant(restarauntInfo.restaurant, map);\n    }\n  });\n};\n"]}