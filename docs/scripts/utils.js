"use strict";var _createClass=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var dbPromise=idb.open("restaurants-store",1,function(e){e.objectStoreNames.contains("restaurants")||e.createObjectStore("restaurants"),e.objectStoreNames.contains("reviews")||e.createObjectStore("reviews"),e.objectStoreNames.contains("sync-reviews")||e.createObjectStore("sync-reviews"),e.objectStoreNames.contains("sync-deleted-reviews")||e.createObjectStore("sync-deleted-reviews"),e.objectStoreNames.contains("sync-is-favorite")||e.createObjectStore("sync-is-favorite")});function writeData(r,n,a){return dbPromise.then(function(e){var t=e.transaction(r,"readwrite");return t.objectStore(r).put(n,a),t.complete})}function readDataByKey(t,r){return dbPromise.then(function(e){return e.transaction(t,"readonly").objectStore(t).get(r)})}function readData(t){return dbPromise.then(function(e){return e.transaction(t,"readonly").objectStore(t).getAll().then(function(e){return e})})}function clearAllData(r){return dbPromise.then(function(e){var t=e.transaction(r,"readwrite");return t.objectStore(r).clear(),t.complete})}function readAllData(t){return dbPromise.then(function(e){return e.transaction(t,"readwrite").objectStore(t).getAll()})}function deleteItemFromData(r,n){dbPromise.then(function(e){var t=e.transaction(r,"readwrite");return t.objectStore(r).delete(n),t.complete}).then(function(){console.log("Item deleted!")})}var ImageHelper=function(){function o(){_classCallCheck(this,o)}return _createClass(o,null,[{key:"creatSourcesForPicture",value:function(n,a){return Object.keys(n).map(function(e){if("jpg"!==e){var t=document.createElement("source");return o.addAttributesToSource(t,n[e],e)}var r=document.createElement("img");return r.setAttribute("data-src",n[e].url),r.alt=a,r.className="restaurant-img lazyload",r})}},{key:"addAttributesToSource",value:function(e,t,r){return e.setAttribute("type","image/"+t.type),e.setAttribute("media","(min-width:"+(r.includes("280")?"280px":"500px")+")"),e.setAttribute("srcset",t.url),e.className="restaurant-img lazyload",e}}]),o}();